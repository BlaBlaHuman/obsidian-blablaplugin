/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __create = Object.create;
var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __getProtoOf = Object.getPrototypeOf;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toESM = (mod, isNodeMode, target) => (target = mod != null ? __create(__getProtoOf(mod)) : {}, __copyProps(
  // If the importer is in node compatibility mode or this is not an ESM
  // file that has been converted to a CommonJS file using a Babel-
  // compatible transform (i.e. "__esModule" has not been set), then set
  // "default" to the CommonJS "module.exports" for node compatibility.
  isNodeMode || !mod || !mod.__esModule ? __defProp(target, "default", { value: mod, enumerable: true }) : target,
  mod
));
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// main.ts
var main_exports = {};
__export(main_exports, {
  default: () => BlaBlaPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian4 = require("obsidian");

// src/Settings.ts
var import_obsidian = require("obsidian");
var DEFAULT_SETTINGS = {
  removeBrackets: true,
  removeEmphasis: false,
  removeTags: false,
  removeComments: false,
  migrateSettingsFromBuildinTemplates: true,
  templateFolder: void 0,
  dateFormat: "YYYY-MM-DD",
  timeFormat: "HH:mm",
  deleteTODOs: false
};
var BlaBlaSettingTab = class extends import_obsidian.PluginSettingTab {
  constructor(plugin) {
    super(plugin.app, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    this.containerEl.createEl("h1", { text: "Template expanding" });
    new import_obsidian.Setting(containerEl).setName("Migrate settings from buildin `Templates` plugin").setDesc("If enabled, template folder is taken from buildin `Templates` settings").addToggle((toggle) => toggle.setValue(this.plugin.settings.migrateSettingsFromBuildinTemplates).onChange(async (value) => {
      this.plugin.settings.migrateSettingsFromBuildinTemplates = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian.Setting(containerEl).setName("Path to templates").setDesc("Path to your templates folder").addText((text) => {
      var _a;
      return text.setPlaceholder("Enter your path").setValue((_a = this.plugin.settings.templateFolder) != null ? _a : "").onChange(async (value) => {
        const trimmedValue = value.trim();
        this.plugin.settings.templateFolder = trimmedValue == "" ? DEFAULT_SETTINGS.templateFolder : trimmedValue;
        await this.plugin.saveSettings();
      });
    });
    new import_obsidian.Setting(containerEl).setName("Date format").setDesc("{{date}} in the template file will be replaced by this value").addText((text) => text.setPlaceholder("YYYY-MM-DD").setValue(this.plugin.settings.dateFormat).onChange(async (value) => {
      this.plugin.settings.dateFormat = value == "" ? DEFAULT_SETTINGS.dateFormat : value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian.Setting(containerEl).setName("Time format").setDesc("{{time}} in the template file will be replaced by this value").addText((text) => text.setPlaceholder("HH:mm").setValue(this.plugin.settings.timeFormat).onChange(async (value) => {
      this.plugin.settings.timeFormat = value == "" ? DEFAULT_SETTINGS.timeFormat : value;
      await this.plugin.saveSettings();
    }));
    this.containerEl.createEl("h1", { text: "Copy plain Markdown" });
    new import_obsidian.Setting(containerEl).setName("Remove Wikilink brackets").setDesc("If enabled, removes wikilink brackets from copied text.").addToggle((toggle) => toggle.setValue(this.plugin.settings.removeBrackets).onChange(async (value) => {
      this.plugin.settings.removeBrackets = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian.Setting(containerEl).setName("Remove text emphasis").setDesc("If enabled, removes highlights.").addToggle((toggle) => toggle.setValue(this.plugin.settings.removeEmphasis).onChange(async (value) => {
      this.plugin.settings.removeEmphasis = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian.Setting(containerEl).setName("Remove hashtags").setDesc("If enabled, removes text immediately after a hashtag.").addToggle((toggle) => toggle.setValue(this.plugin.settings.removeTags).onChange(async (value) => {
      this.plugin.settings.removeTags = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian.Setting(containerEl).setName("Remove comments").setDesc("If enabled, removes commented text.").addToggle((toggle) => toggle.setValue(this.plugin.settings.removeComments).onChange(async (value) => {
      this.plugin.settings.removeComments = value;
      await this.plugin.saveSettings();
    }));
    this.containerEl.createEl("h1", { text: "TODO lists" });
    new import_obsidian.Setting(containerEl).setName("Remove completed TODOs").setDesc("If enabled, removes completed TODOs").addToggle((toggle) => toggle.setValue(this.plugin.settings.deleteTODOs).onChange(async (value) => {
      this.plugin.settings.deleteTODOs = value;
      await this.plugin.saveSettings();
    }));
  }
};

// src/DailyNotes.ts
var import_obsidian2 = require("obsidian");

// src/MigrateSettings.ts
function migrateTemplatesFolder(plugin) {
  try {
    const obsidianTemplatesPlugin = plugin.app.internalPlugins.getPluginById("templates");
    if (!obsidianTemplatesPlugin) {
      return void 0;
    }
    const obsidianTemplatesSettings = obsidianTemplatesPlugin.instance.options;
    if (obsidianTemplatesSettings.folder) {
      return obsidianTemplatesSettings.folder;
    }
  } catch (error) {
  }
  return void 0;
}
function migrateDailyNotesSettings(plugin) {
  var _a, _b;
  try {
    const dailyNotesPlugin = plugin.app.internalPlugins.getPluginById("daily-notes");
    if (!dailyNotesPlugin) {
      return void 0;
    }
    const dailyNotesPluginSettings = dailyNotesPlugin.instance.options;
    return {
      dateFormat: dailyNotesPluginSettings.format,
      newFileLocation: (_a = dailyNotesPluginSettings.folder) == null ? void 0 : _a.trim(),
      templateFileLocation: (_b = dailyNotesPluginSettings.template) == null ? void 0 : _b.trim()
    };
  } catch (error) {
  }
  return void 0;
}

// src/Utils.ts
async function getExpandedTemplate(template, plugin) {
  const moment = window.moment;
  const text = (await plugin.app.vault.read(template)).replace(/{{date}}/gi, moment().format(plugin.settings.dateFormat)).replace(/{{date\s*\:\s*(.+)}}/gi, (match, format) => {
    return moment().format(format);
  }).replace(/{{date\s*\+\s*(\d+)}}/gi, (match, number) => {
    const daysToAdd = parseInt(number, 10);
    const newDate = moment().add(daysToAdd, "days").format(plugin.settings.dateFormat);
    return newDate;
  }).replace(/{{date\s*-\s*(\d+)}}/gi, (match, number) => {
    const daysToAdd = parseInt(number, 10);
    const newDate = moment().add(-daysToAdd, "days").format(plugin.settings.dateFormat);
    return newDate;
  }).replace(/{{time}}/gi, moment().format(plugin.settings.timeFormat)).replace(/{{title}}/gi, template.basename);
  return text;
}

// src/DailyNotes.ts
var path = __toESM(require("path"));
var DailyNotesSuggestModal = class extends import_obsidian2.SuggestModal {
  constructor(app, commands) {
    super(app);
    this.commands = commands;
  }
  getSuggestions(query) {
    return this.commands.filter(
      (it) => it.name.toLowerCase().includes(query.toLowerCase())
    );
  }
  renderSuggestion(command, el) {
    el.createEl("div", { text: command.name });
  }
  onChooseSuggestion(command, _evt) {
    command.callback ? command.callback() : console.error("Daily notes callback was not found");
  }
};
async function openOrCreateNote(plugin, daysShift = 0) {
  const dailyNotesSettings = migrateDailyNotesSettings(plugin);
  const moment = window.moment;
  if (!dailyNotesSettings) {
    new import_obsidian2.Notice("`Daily notes` plugin is not available");
    return;
  }
  let dailyNotesFolder = plugin.app.vault.getAbstractFileByPath(dailyNotesSettings.newFileLocation);
  if (!dailyNotesFolder) {
    dailyNotesFolder = await plugin.app.vault.createFolder(dailyNotesSettings.newFileLocation);
  }
  const noteName = moment().add(daysShift, "days").format(dailyNotesSettings.dateFormat);
  const notePath = path.join(dailyNotesSettings.newFileLocation, `${noteName}.md`);
  let file = plugin.app.vault.getAbstractFileByPath(notePath);
  if (!file) {
    const templateFile = plugin.app.vault.getAbstractFileByPath(`${dailyNotesSettings.templateFileLocation}.md`);
    if (!templateFile)
      return;
    const templateText = await getExpandedTemplate(templateFile, plugin);
    file = await plugin.app.vault.create(notePath, templateText);
  }
  await plugin.app.workspace.openLinkText(file == null ? void 0 : file.path, "", true, { active: true });
}

// src/Templates.ts
var import_obsidian3 = require("obsidian");
var TemplatesSuggestModal = class extends import_obsidian3.SuggestModal {
  constructor(app, suggestions, callback) {
    super(app);
    this.suggestions = suggestions;
    this.callback = callback;
  }
  getSuggestions(query) {
    return this.suggestions.filter(
      (it) => it.path.toLowerCase().includes(query.toLowerCase())
    );
  }
  renderSuggestion(template, el) {
    el.createEl("div", { text: template.basename });
    el.createEl("small", { text: template.path });
  }
  onChooseSuggestion(template, _evt) {
    this.callback(template);
  }
};
function expandTemplate(plugin, editor) {
  let templateFolderPath;
  if (plugin.settings.migrateSettingsFromBuildinTemplates) {
    let internalTemplateFolder = migrateTemplatesFolder(plugin);
    if (internalTemplateFolder == void 0) {
      new import_obsidian3.Notice("Builtin plugin `Templates` is not available");
      return;
    }
    templateFolderPath = internalTemplateFolder;
  } else {
    let localTemplateFolder = plugin.settings.templateFolder;
    if (localTemplateFolder == void 0) {
      new import_obsidian3.Notice("Templates folder is not specified");
      return;
    }
    templateFolderPath = localTemplateFolder;
  }
  const templateName = editor.getSelection().trim();
  const files = plugin.app.vault.getMarkdownFiles().filter(
    (file) => file.path.startsWith(templateFolderPath)
  );
  const insertTemplate = async (template) => {
    const templateText = await getExpandedTemplate(template, plugin);
    editor.replaceSelection(templateText);
  };
  if (templateName == "") {
    const modal = new TemplatesSuggestModal(plugin.app, files, insertTemplate);
    modal.open();
    return;
  }
  let templatesCollection = files.filter((it) => it.basename === templateName);
  if (!templatesCollection.length) {
    new import_obsidian3.Notice(`Template ${templateName} was not found`);
    return;
  }
  if (templatesCollection.length == 1) {
    let template = templatesCollection.first();
    if (!template)
      return;
    insertTemplate(template);
  } else {
    const modal = new TemplatesSuggestModal(plugin.app, templatesCollection, insertTemplate);
    modal.open();
  }
}

// src/CopyPasteImprovements.ts
function copyStructuralFormatting(editor) {
  let textToCopy = editor.getSelection();
  if (textToCopy == "") {
    textToCopy = editor.getValue();
  }
  textToCopy = textToCopy.replace(/<(.|\n)*?>/g, "");
  var blob = new Blob([textToCopy], { type: "text/plain" });
  const data = [new ClipboardItem({
    ["text/plain"]: blob
  })];
  navigator.clipboard.write(data);
}
async function copyPlainMarkdown(plugin, editor) {
  let text = editor.getSelection();
  if (text == "") {
    text = editor.getValue();
  }
  text = text.replace(/---.*?---/g, "");
  text = text.replace(/<(.|\n)*?>/g, "");
  text = text.replace(/\[\^\w+\]/g, "");
  if (plugin.settings.removeBrackets) {
    text = text.replace(/\[\[(.*?)\]\]/g, "$1");
  }
  if (plugin.settings.removeEmphasis) {
    text = text.replace(/==/g, "");
  }
  if (plugin.settings.removeTags) {
    text = text.replace(/#\w+/g, "");
  }
  if (plugin.settings.removeComments) {
    text = text.replace(/%%.+%%/g, "");
  }
  var blob = new Blob([text], { type: "text/plain" });
  const data = [new ClipboardItem({
    ["text/plain"]: blob
  })];
  navigator.clipboard.write(data);
}

// main.ts
var BlaBlaPlugin = class extends import_obsidian4.Plugin {
  constructor() {
    super(...arguments);
    this.commands = [];
  }
  async onload() {
    await this.loadSettings();
    const expandTemplateCommand = this.addCommand({
      id: "expand-template",
      name: "Expand template",
      editorCallback: (editor) => expandTemplate(this, editor)
    });
    this.commands.push(expandTemplateCommand);
    const copyPlaiMarkdownCommand = this.addCommand({
      id: "copy-plain-markdown",
      name: "Copy plain markdown",
      editorCallback: (editor) => copyPlainMarkdown(this, editor)
    });
    this.commands.push(copyPlaiMarkdownCommand);
    const copyStructuralFormattingCommand = this.addCommand({
      id: "copy-structural-formatting",
      name: "Copy structural formatting only",
      editorCallback: (editor) => copyStructuralFormatting(editor)
    });
    this.commands.push(copyStructuralFormattingCommand);
    const openTomorrowNoteCommand = this.addCommand({
      id: "open-note-tomorrow",
      name: "Open tomorrow`s note",
      callback: () => {
        openOrCreateNote(this, 1);
      }
    });
    this.commands.push(openTomorrowNoteCommand);
    const openYesterdayNoteCommand = this.addCommand({
      id: "open-note-yesterday",
      name: "Open yesterday`s note",
      callback: () => {
        openOrCreateNote(this, -1);
      }
    });
    this.commands.push(openYesterdayNoteCommand);
    const openTodayNoteCommand = this.addCommand({
      id: "open-note-today",
      name: "Open today`s note",
      callback: () => {
        openOrCreateNote(this);
      }
    });
    this.commands.push(openTodayNoteCommand);
    this.addRibbonIcon("calendar", "Open daily note", () => {
      const modal = new DailyNotesSuggestModal(this.app, this.commands.filter((it) => {
        return it.id.startsWith(`${this.manifest.id}:open-note`);
      }));
      modal.open();
    });
    const removeTODOsCallback = () => {
      const activeView = this.app.workspace.getActiveViewOfType(import_obsidian4.MarkdownView);
      if (!activeView)
        return;
      const editor = activeView.editor;
      const noteFile = this.app.workspace.getActiveFile();
      if (!noteFile)
        return;
      let text = editor.getValue();
      let found = false;
      text = text.replace(/\-\s\[\x\]\s([^\n]+)/g, (_match, _cap) => {
        found = true;
        return "";
      });
      if (!found)
        return;
      editor.setValue(text);
    };
    const removeTODOsTimeout = 2e3;
    let inputTimeout;
    if (this.settings.deleteTODOs)
      inputTimeout = setTimeout(removeTODOsCallback, removeTODOsTimeout);
    this.registerEvent(this.app.workspace.on("editor-change", (_editor, _info) => {
      if (!this.settings.deleteTODOs)
        return;
      clearTimeout(inputTimeout);
      inputTimeout = setTimeout(removeTODOsCallback, removeTODOsTimeout);
    }));
    const removeEmptyLines = this.addCommand({
      id: "remove-empty-lines",
      name: "Remove empty lines",
      editorCallback: (editor) => {
        const noteFile = this.app.workspace.getActiveFile();
        if (!noteFile)
          return;
        let text = editor.getValue();
        let found = false;
        text = text.replace(/^\s*[\r\n]*/g, (_match, _cap) => {
          found = true;
          return "";
        });
        text = text.replace(/(\r?\n){3,}/g, (_match, _cap) => {
          found = true;
          return "\n\n";
        });
        if (!found)
          return;
        editor.setValue(text);
      }
    });
    this.commands.push(removeEmptyLines);
    this.addSettingTab(new BlaBlaSettingTab(this));
  }
  onunload() {
  }
  async loadSettings() {
    this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.loadData());
  }
  async saveSettings() {
    await this.saveData(this.settings);
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibWFpbi50cyIsICJzcmMvU2V0dGluZ3MudHMiLCAic3JjL0RhaWx5Tm90ZXMudHMiLCAic3JjL01pZ3JhdGVTZXR0aW5ncy50cyIsICJzcmMvVXRpbHMudHMiLCAic3JjL1RlbXBsYXRlcy50cyIsICJzcmMvQ29weVBhc3RlSW1wcm92ZW1lbnRzLnRzIl0sCiAgInNvdXJjZXNDb250ZW50IjogWyJpbXBvcnQgeyBFZGl0b3IsIFBsdWdpbiwgQ29tbWFuZCwgTWFya2Rvd25WaWV3LCB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB7IEJsYUJsYVNldHRpbmdUYWIsIFBsdWdpblNldHRpbmdzLCBERUZBVUxUX1NFVFRJTkdTIH0gZnJvbSBcInNyYy9TZXR0aW5nc1wiXG5pbXBvcnQgeyBEYWlseU5vdGVzU3VnZ2VzdE1vZGFsLCBvcGVuT3JDcmVhdGVOb3RlIH0gZnJvbSAnc3JjL0RhaWx5Tm90ZXMnO1xuaW1wb3J0IHsgZXhwYW5kVGVtcGxhdGUgfSBmcm9tICdzcmMvVGVtcGxhdGVzJztcbmltcG9ydCB7IGNvcHlQbGFpbk1hcmtkb3duLCBjb3B5U3RydWN0dXJhbEZvcm1hdHRpbmcgfSBmcm9tICdzcmMvQ29weVBhc3RlSW1wcm92ZW1lbnRzJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQmxhQmxhUGx1Z2luIGV4dGVuZHMgUGx1Z2luIHtcblx0c2V0dGluZ3M6IFBsdWdpblNldHRpbmdzO1xuXHRjb21tYW5kczogQ29tbWFuZFtdID0gW107XG5cblx0YXN5bmMgb25sb2FkKCkge1xuXHRcdGF3YWl0IHRoaXMubG9hZFNldHRpbmdzKCk7XG5cblx0XHRjb25zdCBleHBhbmRUZW1wbGF0ZUNvbW1hbmQgPSB0aGlzLmFkZENvbW1hbmQoe1xuXHRcdFx0aWQ6ICdleHBhbmQtdGVtcGxhdGUnLFxuXHRcdFx0bmFtZTogJ0V4cGFuZCB0ZW1wbGF0ZScsXG5cdFx0XHRlZGl0b3JDYWxsYmFjazogKGVkaXRvcjogYW55KSA9PiBleHBhbmRUZW1wbGF0ZSh0aGlzLCBlZGl0b3IpXG5cdFx0fSk7XG5cdFx0dGhpcy5jb21tYW5kcy5wdXNoKGV4cGFuZFRlbXBsYXRlQ29tbWFuZCk7XG5cblx0XHRjb25zdCBjb3B5UGxhaU1hcmtkb3duQ29tbWFuZCA9IHRoaXMuYWRkQ29tbWFuZCh7XG5cdFx0XHRpZDogJ2NvcHktcGxhaW4tbWFya2Rvd24nLFxuXHRcdFx0bmFtZTogJ0NvcHkgcGxhaW4gbWFya2Rvd24nLFxuXHRcdFx0ZWRpdG9yQ2FsbGJhY2s6IChlZGl0b3I6IGFueSkgPT4gY29weVBsYWluTWFya2Rvd24odGhpcywgZWRpdG9yKVxuXHRcdH0pO1xuXHRcdHRoaXMuY29tbWFuZHMucHVzaChjb3B5UGxhaU1hcmtkb3duQ29tbWFuZClcblxuXG5cdFx0Y29uc3QgY29weVN0cnVjdHVyYWxGb3JtYXR0aW5nQ29tbWFuZCA9IHRoaXMuYWRkQ29tbWFuZCh7XG5cdFx0XHRpZDogJ2NvcHktc3RydWN0dXJhbC1mb3JtYXR0aW5nJyxcblx0XHRcdG5hbWU6ICdDb3B5IHN0cnVjdHVyYWwgZm9ybWF0dGluZyBvbmx5Jyxcblx0XHRcdGVkaXRvckNhbGxiYWNrOiAoZWRpdG9yOiBhbnkpID0+IGNvcHlTdHJ1Y3R1cmFsRm9ybWF0dGluZyhlZGl0b3IpXG5cdFx0fSk7XG5cdFx0dGhpcy5jb21tYW5kcy5wdXNoKGNvcHlTdHJ1Y3R1cmFsRm9ybWF0dGluZ0NvbW1hbmQpXG5cblxuXHRcdGNvbnN0IG9wZW5Ub21vcnJvd05vdGVDb21tYW5kID0gdGhpcy5hZGRDb21tYW5kKHtcblx0XHRcdGlkOiAnb3Blbi1ub3RlLXRvbW9ycm93Jyxcblx0XHRcdG5hbWU6ICdPcGVuIHRvbW9ycm93YHMgbm90ZScsXG5cdFx0XHRjYWxsYmFjazogKCkgPT4ge1xuXHRcdFx0XHRvcGVuT3JDcmVhdGVOb3RlKHRoaXMsIDEpXG5cdFx0XHR9XG5cdFx0fSk7XG5cdFx0dGhpcy5jb21tYW5kcy5wdXNoKG9wZW5Ub21vcnJvd05vdGVDb21tYW5kKVxuXG5cdFx0Y29uc3Qgb3Blblllc3RlcmRheU5vdGVDb21tYW5kID0gdGhpcy5hZGRDb21tYW5kKHtcblx0XHRcdGlkOiAnb3Blbi1ub3RlLXllc3RlcmRheScsXG5cdFx0XHRuYW1lOiAnT3BlbiB5ZXN0ZXJkYXlgcyBub3RlJyxcblx0XHRcdGNhbGxiYWNrOiAoKSA9PiB7XG5cdFx0XHRcdG9wZW5PckNyZWF0ZU5vdGUodGhpcywgLTEpXG5cdFx0XHR9XG5cdFx0fSk7XG5cdFx0dGhpcy5jb21tYW5kcy5wdXNoKG9wZW5ZZXN0ZXJkYXlOb3RlQ29tbWFuZClcblxuXHRcdGNvbnN0IG9wZW5Ub2RheU5vdGVDb21tYW5kID0gdGhpcy5hZGRDb21tYW5kKHtcblx0XHRcdGlkOiAnb3Blbi1ub3RlLXRvZGF5Jyxcblx0XHRcdG5hbWU6ICdPcGVuIHRvZGF5YHMgbm90ZScsXG5cdFx0XHRjYWxsYmFjazogKCkgPT4ge1xuXHRcdFx0XHRvcGVuT3JDcmVhdGVOb3RlKHRoaXMpXG5cdFx0XHR9XG5cdFx0fSk7XG5cdFx0dGhpcy5jb21tYW5kcy5wdXNoKG9wZW5Ub2RheU5vdGVDb21tYW5kKVxuXG5cblx0XHR0aGlzLmFkZFJpYmJvbkljb24oXCJjYWxlbmRhclwiLCBcIk9wZW4gZGFpbHkgbm90ZVwiLCAoKSA9PiB7XG5cdFx0XHRjb25zdCBtb2RhbCA9IG5ldyBEYWlseU5vdGVzU3VnZ2VzdE1vZGFsKHRoaXMuYXBwLCB0aGlzLmNvbW1hbmRzLmZpbHRlcihpdCA9PiB7XG5cdFx0XHRcdHJldHVybiBpdC5pZC5zdGFydHNXaXRoKGAke3RoaXMubWFuaWZlc3QuaWR9Om9wZW4tbm90ZWApXG5cdFx0XHR9KSlcblx0XHRcdG1vZGFsLm9wZW4oKVxuXHRcdH0pO1xuXG5cblx0XHRjb25zdCByZW1vdmVUT0RPc0NhbGxiYWNrID0gKCkgPT4ge1xuXHRcdFx0Y29uc3QgYWN0aXZlVmlldyA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVWaWV3T2ZUeXBlKE1hcmtkb3duVmlldyk7XG5cdFx0XHRpZiAoIWFjdGl2ZVZpZXcpXG5cdFx0XHRcdHJldHVybjtcblx0XHRcdGNvbnN0IGVkaXRvciA9IGFjdGl2ZVZpZXcuZWRpdG9yO1xuXHRcdFx0Y29uc3Qgbm90ZUZpbGUgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpO1xuXHRcdFx0aWYgKCFub3RlRmlsZSkgcmV0dXJuO1xuXHRcdFx0bGV0IHRleHQgPSBlZGl0b3IuZ2V0VmFsdWUoKTtcblx0XHRcdGxldCBmb3VuZCA9IGZhbHNlO1xuXHRcdFx0dGV4dCA9IHRleHQucmVwbGFjZSgvXFwtXFxzXFxbXFx4XFxdXFxzKFteXFxuXSspL2csIChfbWF0Y2gsIF9jYXApID0+IHtcblx0XHRcdFx0Zm91bmQgPSB0cnVlO1xuXHRcdFx0XHRyZXR1cm4gJyc7XG5cdFx0XHR9KTtcblx0XHRcdGlmICghZm91bmQpXG5cdFx0XHRcdHJldHVybjtcblxuXHRcdFx0ZWRpdG9yLnNldFZhbHVlKHRleHQpO1xuXHRcdH1cblx0XHRjb25zdCByZW1vdmVUT0RPc1RpbWVvdXQgPSAyMDAwO1xuXG5cblx0XHRsZXQgaW5wdXRUaW1lb3V0OiBOb2RlSlMuVGltZW91dDtcblx0XHRpZiAodGhpcy5zZXR0aW5ncy5kZWxldGVUT0RPcylcblx0XHRcdGlucHV0VGltZW91dCA9IHNldFRpbWVvdXQocmVtb3ZlVE9ET3NDYWxsYmFjaywgcmVtb3ZlVE9ET3NUaW1lb3V0KTtcblx0XHR0aGlzLnJlZ2lzdGVyRXZlbnQodGhpcy5hcHAud29ya3NwYWNlLm9uKCdlZGl0b3ItY2hhbmdlJywgKF9lZGl0b3IsIF9pbmZvKSA9PiB7XG5cdFx0XHRpZiAoIXRoaXMuc2V0dGluZ3MuZGVsZXRlVE9ET3MpXG5cdFx0XHRcdHJldHVybjtcblx0XHRcdGNsZWFyVGltZW91dChpbnB1dFRpbWVvdXQpO1xuXHRcdFx0aW5wdXRUaW1lb3V0ID0gc2V0VGltZW91dChyZW1vdmVUT0RPc0NhbGxiYWNrLCByZW1vdmVUT0RPc1RpbWVvdXQpO1xuXHRcdH0pKVxuXG5cdFx0Y29uc3QgcmVtb3ZlRW1wdHlMaW5lcyA9IHRoaXMuYWRkQ29tbWFuZCh7XG5cdFx0XHRpZDogJ3JlbW92ZS1lbXB0eS1saW5lcycsXG5cdFx0XHRuYW1lOiAnUmVtb3ZlIGVtcHR5IGxpbmVzJyxcblx0XHRcdGVkaXRvckNhbGxiYWNrOiAoZWRpdG9yOiBFZGl0b3IpID0+IHtcblx0XHRcdFx0Y29uc3Qgbm90ZUZpbGUgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpO1xuXHRcdFx0XHRpZiAoIW5vdGVGaWxlKSByZXR1cm47XG5cdFx0XHRcdGxldCB0ZXh0ID0gZWRpdG9yLmdldFZhbHVlKClcblx0XHRcdFx0bGV0IGZvdW5kID0gZmFsc2U7XG5cdFx0XHRcdHRleHQgPSB0ZXh0LnJlcGxhY2UoL15cXHMqW1xcclxcbl0qL2csIChfbWF0Y2gsIF9jYXApID0+IHtcblx0XHRcdFx0XHRmb3VuZCA9IHRydWU7XG5cdFx0XHRcdFx0cmV0dXJuICcnO1xuXHRcdFx0XHR9KTtcblx0XHRcdFx0dGV4dCA9IHRleHQucmVwbGFjZSgvKFxccj9cXG4pezMsfS9nLCAoX21hdGNoLCBfY2FwKSA9PiB7XG5cdFx0XHRcdFx0Zm91bmQgPSB0cnVlO1xuXHRcdFx0XHRcdHJldHVybiAnXFxuXFxuJztcblx0XHRcdFx0fSk7XG5cblx0XHRcdFx0aWYgKCFmb3VuZClcblx0XHRcdFx0XHRyZXR1cm47XG5cblx0XHRcdFx0ZWRpdG9yLnNldFZhbHVlKHRleHQpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHRcdHRoaXMuY29tbWFuZHMucHVzaChyZW1vdmVFbXB0eUxpbmVzKVxuXG5cblx0XHR0aGlzLmFkZFNldHRpbmdUYWIobmV3IEJsYUJsYVNldHRpbmdUYWIodGhpcykpO1xuXHR9XG5cblx0b251bmxvYWQoKSB7XG5cblx0fVxuXG5cdGFzeW5jIGxvYWRTZXR0aW5ncygpIHtcblx0XHR0aGlzLnNldHRpbmdzID0gT2JqZWN0LmFzc2lnbih7fSwgREVGQVVMVF9TRVRUSU5HUywgYXdhaXQgdGhpcy5sb2FkRGF0YSgpKTtcblx0fVxuXG5cdGFzeW5jIHNhdmVTZXR0aW5ncygpIHtcblx0XHRhd2FpdCB0aGlzLnNhdmVEYXRhKHRoaXMuc2V0dGluZ3MpO1xuXHR9XG59IiwgImltcG9ydCB7IFBsdWdpblNldHRpbmdUYWIsIFNldHRpbmcgfSBmcm9tIFwib2JzaWRpYW5cIlxuaW1wb3J0IEJsYUJsYVBsdWdpbiBmcm9tIFwiLi4vbWFpblwiXG5cbmV4cG9ydCBpbnRlcmZhY2UgUGx1Z2luU2V0dGluZ3Mge1xuXHRyZW1vdmVCcmFja2V0czogYm9vbGVhbjtcblx0cmVtb3ZlRW1waGFzaXM6IGJvb2xlYW47XG5cdHJlbW92ZVRhZ3M6IGJvb2xlYW47XG5cdHJlbW92ZUNvbW1lbnRzOiBib29sZWFuO1xuICAgIG1pZ3JhdGVTZXR0aW5nc0Zyb21CdWlsZGluVGVtcGxhdGVzOiBib29sZWFuO1xuXHR0ZW1wbGF0ZUZvbGRlcjogc3RyaW5nIHwgdW5kZWZpbmVkO1xuICAgIGRhdGVGb3JtYXQ6IHN0cmluZztcbiAgICB0aW1lRm9ybWF0OiBzdHJpbmc7XG4gICAgZGVsZXRlVE9ET3M6IGJvb2xlYW47XG59XG5cblxuZXhwb3J0IGNvbnN0IERFRkFVTFRfU0VUVElOR1M6IFBsdWdpblNldHRpbmdzID0ge1xuXHRyZW1vdmVCcmFja2V0czogdHJ1ZSxcblx0cmVtb3ZlRW1waGFzaXM6IGZhbHNlLFxuXHRyZW1vdmVUYWdzOiBmYWxzZSxcblx0cmVtb3ZlQ29tbWVudHM6IGZhbHNlLFxuICAgIG1pZ3JhdGVTZXR0aW5nc0Zyb21CdWlsZGluVGVtcGxhdGVzOiB0cnVlLFxuXHR0ZW1wbGF0ZUZvbGRlcjogdW5kZWZpbmVkLFxuICAgIGRhdGVGb3JtYXQ6IFwiWVlZWS1NTS1ERFwiLFxuICAgIHRpbWVGb3JtYXQ6IFwiSEg6bW1cIixcbiAgICBkZWxldGVUT0RPczogZmFsc2Vcbn1cblxuZXhwb3J0IGNsYXNzIEJsYUJsYVNldHRpbmdUYWIgZXh0ZW5kcyBQbHVnaW5TZXR0aW5nVGFiIHtcblx0cGx1Z2luOiBCbGFCbGFQbHVnaW47XG5cblx0Y29uc3RydWN0b3IocGx1Z2luOiBCbGFCbGFQbHVnaW4pIHtcblx0XHRzdXBlcihwbHVnaW4uYXBwLCBwbHVnaW4pO1xuXHRcdHRoaXMucGx1Z2luID0gcGx1Z2luO1xuXHR9XG5cblx0ZGlzcGxheSgpOiB2b2lkIHtcblx0XHRjb25zdCB7IGNvbnRhaW5lckVsIH0gPSB0aGlzO1xuXG5cdFx0Y29udGFpbmVyRWwuZW1wdHkoKTtcbiAgICAgICAgdGhpcy5jb250YWluZXJFbC5jcmVhdGVFbChcImgxXCIsIHsgdGV4dDogXCJUZW1wbGF0ZSBleHBhbmRpbmdcIiB9KTtcblxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcblx0XHRcdC5zZXROYW1lKCdNaWdyYXRlIHNldHRpbmdzIGZyb20gYnVpbGRpbiBgVGVtcGxhdGVzYCBwbHVnaW4nKVxuXHRcdFx0LnNldERlc2MoJ0lmIGVuYWJsZWQsIHRlbXBsYXRlIGZvbGRlciBpcyB0YWtlbiBmcm9tIGJ1aWxkaW4gYFRlbXBsYXRlc2Agc2V0dGluZ3MnKVxuXHRcdFx0LmFkZFRvZ2dsZSh0b2dnbGUgPT4gdG9nZ2xlXG5cdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5taWdyYXRlU2V0dGluZ3NGcm9tQnVpbGRpblRlbXBsYXRlcylcblx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuXHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLm1pZ3JhdGVTZXR0aW5nc0Zyb21CdWlsZGluVGVtcGxhdGVzID0gdmFsdWU7XG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdH0pKTtcblxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuXHRcdFx0LnNldE5hbWUoJ1BhdGggdG8gdGVtcGxhdGVzJylcblx0XHRcdC5zZXREZXNjKCdQYXRoIHRvIHlvdXIgdGVtcGxhdGVzIGZvbGRlcicpXG5cdFx0XHQuYWRkVGV4dCh0ZXh0ID0+IHRleHRcblx0XHRcdFx0LnNldFBsYWNlaG9sZGVyKCdFbnRlciB5b3VyIHBhdGgnKVxuXHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MudGVtcGxhdGVGb2xkZXIgPz8gXCJcIilcblx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB0cmltbWVkVmFsdWUgPSB2YWx1ZS50cmltKClcblx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy50ZW1wbGF0ZUZvbGRlciA9IHRyaW1tZWRWYWx1ZSA9PSBcIlwiID8gREVGQVVMVF9TRVRUSU5HUy50ZW1wbGF0ZUZvbGRlciA6IHRyaW1tZWRWYWx1ZTtcblx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0fSkpO1xuXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuXHRcdFx0LnNldE5hbWUoJ0RhdGUgZm9ybWF0Jylcblx0XHRcdC5zZXREZXNjKCd7e2RhdGV9fSBpbiB0aGUgdGVtcGxhdGUgZmlsZSB3aWxsIGJlIHJlcGxhY2VkIGJ5IHRoaXMgdmFsdWUnKVxuXHRcdFx0LmFkZFRleHQodGV4dCA9PiB0ZXh0XG5cdFx0XHRcdC5zZXRQbGFjZWhvbGRlcignWVlZWS1NTS1ERCcpXG5cdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5kYXRlRm9ybWF0KVxuXHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuZGF0ZUZvcm1hdCA9IHZhbHVlID09IFwiXCIgPyBERUZBVUxUX1NFVFRJTkdTLmRhdGVGb3JtYXQgOiB2YWx1ZTtcblx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0fSkpO1xuXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuXHRcdFx0LnNldE5hbWUoJ1RpbWUgZm9ybWF0Jylcblx0XHRcdC5zZXREZXNjKCd7e3RpbWV9fSBpbiB0aGUgdGVtcGxhdGUgZmlsZSB3aWxsIGJlIHJlcGxhY2VkIGJ5IHRoaXMgdmFsdWUnKVxuXHRcdFx0LmFkZFRleHQodGV4dCA9PiB0ZXh0XG5cdFx0XHRcdC5zZXRQbGFjZWhvbGRlcignSEg6bW0nKVxuXHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MudGltZUZvcm1hdClcblx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuXHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLnRpbWVGb3JtYXQgPSB2YWx1ZSA9PSBcIlwiID8gREVGQVVMVF9TRVRUSU5HUy50aW1lRm9ybWF0IDogdmFsdWU7XG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdH0pKTtcblxuICAgICAgICB0aGlzLmNvbnRhaW5lckVsLmNyZWF0ZUVsKFwiaDFcIiwgeyB0ZXh0OiBcIkNvcHkgcGxhaW4gTWFya2Rvd25cIiB9KTtcblxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuXHRcdFx0LnNldE5hbWUoXCJSZW1vdmUgV2lraWxpbmsgYnJhY2tldHNcIilcblx0XHRcdC5zZXREZXNjKFwiSWYgZW5hYmxlZCwgcmVtb3ZlcyB3aWtpbGluayBicmFja2V0cyBmcm9tIGNvcGllZCB0ZXh0LlwiKVxuXHRcdFx0LmFkZFRvZ2dsZSh0b2dnbGUgPT4gdG9nZ2xlXG5cdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5yZW1vdmVCcmFja2V0cylcblx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuXHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLnJlbW92ZUJyYWNrZXRzID0gdmFsdWU7XG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdH0pKTtcblxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuXHRcdFx0LnNldE5hbWUoXCJSZW1vdmUgdGV4dCBlbXBoYXNpc1wiKVxuXHRcdFx0LnNldERlc2MoXCJJZiBlbmFibGVkLCByZW1vdmVzIGhpZ2hsaWdodHMuXCIpXG5cdFx0XHQuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB0b2dnbGVcblx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnJlbW92ZUVtcGhhc2lzKVxuXHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MucmVtb3ZlRW1waGFzaXMgPSB2YWx1ZTtcblx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0fSkpO1xuXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG5cdFx0XHQuc2V0TmFtZShcIlJlbW92ZSBoYXNodGFnc1wiKVxuXHRcdFx0LnNldERlc2MoXCJJZiBlbmFibGVkLCByZW1vdmVzIHRleHQgaW1tZWRpYXRlbHkgYWZ0ZXIgYSBoYXNodGFnLlwiKVxuXHRcdFx0LmFkZFRvZ2dsZSh0b2dnbGUgPT4gdG9nZ2xlXG5cdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5yZW1vdmVUYWdzKVxuXHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MucmVtb3ZlVGFncyA9IHZhbHVlO1xuXHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHR9KSk7XG5cblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcblx0XHRcdC5zZXROYW1lKFwiUmVtb3ZlIGNvbW1lbnRzXCIpXG5cdFx0XHQuc2V0RGVzYyhcIklmIGVuYWJsZWQsIHJlbW92ZXMgY29tbWVudGVkIHRleHQuXCIpXG5cdFx0XHQuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB0b2dnbGVcblx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnJlbW92ZUNvbW1lbnRzKVxuXHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MucmVtb3ZlQ29tbWVudHMgPSB2YWx1ZTtcblx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0fSkpO1xuXG4gICAgICAgIHRoaXMuY29udGFpbmVyRWwuY3JlYXRlRWwoXCJoMVwiLCB7IHRleHQ6IFwiVE9ETyBsaXN0c1wiIH0pO1xuXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoXCJSZW1vdmUgY29tcGxldGVkIFRPRE9zXCIpXG4gICAgICAgICAgICAuc2V0RGVzYyhcIklmIGVuYWJsZWQsIHJlbW92ZXMgY29tcGxldGVkIFRPRE9zXCIpXG4gICAgICAgICAgICAuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB0b2dnbGVcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZGVsZXRlVE9ET3MpXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5kZWxldGVUT0RPcyA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICB9KSk7XG5cdH1cbn0iLCAiaW1wb3J0IHsgU3VnZ2VzdE1vZGFsLCBDb21tYW5kLCBOb3RpY2UsIEFwcCwgVEZpbGUgfSBmcm9tIFwib2JzaWRpYW5cIjtcbmltcG9ydCB7IG1pZ3JhdGVEYWlseU5vdGVzU2V0dGluZ3MgfSBmcm9tIFwiLi9NaWdyYXRlU2V0dGluZ3NcIjtcbmltcG9ydCB7IGdldEV4cGFuZGVkVGVtcGxhdGUgfSBmcm9tIFwiLi9VdGlsc1wiO1xuaW1wb3J0ICogYXMgcGF0aCBmcm9tIFwicGF0aFwiXG5pbXBvcnQgQmxhQmxhUGx1Z2luIGZyb20gXCJtYWluXCI7XG5cbmV4cG9ydCBjbGFzcyBEYWlseU5vdGVzU3VnZ2VzdE1vZGFsIGV4dGVuZHMgU3VnZ2VzdE1vZGFsPENvbW1hbmQ+IHtcblx0Y29tbWFuZHM6IENvbW1hbmRbXTtcblxuXHRjb25zdHJ1Y3RvcihhcHA6IEFwcCwgY29tbWFuZHM6IENvbW1hbmRbXSkge1xuXHRcdHN1cGVyKGFwcCk7XG5cdFx0dGhpcy5jb21tYW5kcyA9IGNvbW1hbmRzO1xuXHR9XG5cdGdldFN1Z2dlc3Rpb25zKHF1ZXJ5OiBzdHJpbmcpOiBDb21tYW5kW10ge1xuXHRcdHJldHVybiB0aGlzLmNvbW1hbmRzLmZpbHRlcigoaXQpID0+XG5cdFx0XHRpdC5uYW1lLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMocXVlcnkudG9Mb3dlckNhc2UoKSlcblx0XHQpO1xuXHR9XG5cblx0cmVuZGVyU3VnZ2VzdGlvbihjb21tYW5kOiBDb21tYW5kLCBlbDogSFRNTEVsZW1lbnQpIHtcblx0XHRlbC5jcmVhdGVFbChcImRpdlwiLCB7IHRleHQ6IGNvbW1hbmQubmFtZSB9KTtcblx0fVxuXG5cdG9uQ2hvb3NlU3VnZ2VzdGlvbihjb21tYW5kOiBDb21tYW5kLCBfZXZ0OiBNb3VzZUV2ZW50IHwgS2V5Ym9hcmRFdmVudCkge1xuXHRcdGNvbW1hbmQuY2FsbGJhY2sgPyBjb21tYW5kLmNhbGxiYWNrKCkgOiBjb25zb2xlLmVycm9yKFwiRGFpbHkgbm90ZXMgY2FsbGJhY2sgd2FzIG5vdCBmb3VuZFwiKTtcblxuXHR9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBvcGVuT3JDcmVhdGVOb3RlKHBsdWdpbjogQmxhQmxhUGx1Z2luLCBkYXlzU2hpZnQ6IG51bWJlciA9IDApIHtcbiAgICBjb25zdCBkYWlseU5vdGVzU2V0dGluZ3MgPSBtaWdyYXRlRGFpbHlOb3Rlc1NldHRpbmdzKHBsdWdpbik7XG4gICAgY29uc3QgbW9tZW50ID0gd2luZG93Lm1vbWVudDtcblxuICAgIGlmICghZGFpbHlOb3Rlc1NldHRpbmdzKSB7XG4gICAgICAgIG5ldyBOb3RpY2UoXCJgRGFpbHkgbm90ZXNgIHBsdWdpbiBpcyBub3QgYXZhaWxhYmxlXCIpXG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBsZXQgZGFpbHlOb3Rlc0ZvbGRlciA9IHBsdWdpbi5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGRhaWx5Tm90ZXNTZXR0aW5ncy5uZXdGaWxlTG9jYXRpb24pO1xuICAgIGlmICghZGFpbHlOb3Rlc0ZvbGRlcikge1xuICAgICAgICBkYWlseU5vdGVzRm9sZGVyID0gYXdhaXQgcGx1Z2luLmFwcC52YXVsdC5jcmVhdGVGb2xkZXIoZGFpbHlOb3Rlc1NldHRpbmdzLm5ld0ZpbGVMb2NhdGlvbik7XG4gICAgfVxuXG4gICAgY29uc3Qgbm90ZU5hbWUgPSBtb21lbnQoKS5hZGQoZGF5c1NoaWZ0LCBcImRheXNcIikuZm9ybWF0KGRhaWx5Tm90ZXNTZXR0aW5ncy5kYXRlRm9ybWF0KTtcbiAgICBjb25zdCBub3RlUGF0aCA9IHBhdGguam9pbihkYWlseU5vdGVzU2V0dGluZ3MubmV3RmlsZUxvY2F0aW9uLCBgJHtub3RlTmFtZX0ubWRgKTtcbiAgICBsZXQgZmlsZTogVEZpbGUgfCBudWxsID0gcGx1Z2luLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgobm90ZVBhdGgpIGFzIFRGaWxlO1xuXG4gICAgaWYgKCFmaWxlKSB7XG4gICAgICAgIGNvbnN0IHRlbXBsYXRlRmlsZSA9IHBsdWdpbi5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGAke2RhaWx5Tm90ZXNTZXR0aW5ncy50ZW1wbGF0ZUZpbGVMb2NhdGlvbn0ubWRgKSBhcyBURmlsZTtcbiAgICAgICAgaWYgKCF0ZW1wbGF0ZUZpbGUpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGNvbnN0IHRlbXBsYXRlVGV4dCA9IGF3YWl0IGdldEV4cGFuZGVkVGVtcGxhdGUodGVtcGxhdGVGaWxlLCBwbHVnaW4pO1xuICAgICAgICBmaWxlID0gYXdhaXQgcGx1Z2luLmFwcC52YXVsdC5jcmVhdGUobm90ZVBhdGgsIHRlbXBsYXRlVGV4dCk7XG4gICAgfVxuXG4gICAgYXdhaXQgcGx1Z2luLmFwcC53b3Jrc3BhY2Uub3BlbkxpbmtUZXh0KGZpbGU/LnBhdGgsICcnLCB0cnVlLCB7IGFjdGl2ZTogdHJ1ZSB9KTtcbn0iLCAiaW1wb3J0IEJsYUJsYVBsdWdpbiBmcm9tIFwiLi4vbWFpblwiO1xuXG5leHBvcnQgZnVuY3Rpb24gbWlncmF0ZVRlbXBsYXRlc0ZvbGRlcihwbHVnaW46IEJsYUJsYVBsdWdpbik6IHN0cmluZyB8IHVuZGVmaW5lZCB7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3Qgb2JzaWRpYW5UZW1wbGF0ZXNQbHVnaW4gPVxuICAgICAgICAgICAgKHBsdWdpbi5hcHAgYXMgYW55KS5pbnRlcm5hbFBsdWdpbnMuZ2V0UGx1Z2luQnlJZChcInRlbXBsYXRlc1wiKTtcblxuICAgICAgICBpZiAoIW9ic2lkaWFuVGVtcGxhdGVzUGx1Z2luKSB7XG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3Qgb2JzaWRpYW5UZW1wbGF0ZXNTZXR0aW5ncyA9XG4gICAgICAgICAgICBvYnNpZGlhblRlbXBsYXRlc1BsdWdpbi5pbnN0YW5jZS5vcHRpb25zO1xuICAgICAgICBpZiAob2JzaWRpYW5UZW1wbGF0ZXNTZXR0aW5ncy5mb2xkZXIpIHtcbiAgICAgICAgICAgIHJldHVybiBvYnNpZGlhblRlbXBsYXRlc1NldHRpbmdzLmZvbGRlcjtcbiAgICAgICAgfVxuXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICB9XG5cbiAgICByZXR1cm4gdW5kZWZpbmVkO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIElEYWlseU5vdGVzU2V0dGluZ3Mge1xuICAgIGRhdGVGb3JtYXQ6IHN0cmluZyxcbiAgICBuZXdGaWxlTG9jYXRpb246IHN0cmluZyxcbiAgICB0ZW1wbGF0ZUZpbGVMb2NhdGlvbjogc3RyaW5nXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBtaWdyYXRlRGFpbHlOb3Rlc1NldHRpbmdzKHBsdWdpbjogQmxhQmxhUGx1Z2luKTogSURhaWx5Tm90ZXNTZXR0aW5ncyB8IHVuZGVmaW5lZCB7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgZGFpbHlOb3Rlc1BsdWdpbiA9XG4gICAgICAgICAgICAocGx1Z2luLmFwcCBhcyBhbnkpLmludGVybmFsUGx1Z2lucy5nZXRQbHVnaW5CeUlkKFwiZGFpbHktbm90ZXNcIik7XG5cbiAgICAgICAgaWYgKCFkYWlseU5vdGVzUGx1Z2luKSB7XG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgZGFpbHlOb3Rlc1BsdWdpblNldHRpbmdzID1cbiAgICAgICAgICAgIGRhaWx5Tm90ZXNQbHVnaW4uaW5zdGFuY2Uub3B0aW9ucztcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgZGF0ZUZvcm1hdDogZGFpbHlOb3Rlc1BsdWdpblNldHRpbmdzLmZvcm1hdCxcbiAgICAgICAgICAgIG5ld0ZpbGVMb2NhdGlvbjogZGFpbHlOb3Rlc1BsdWdpblNldHRpbmdzLmZvbGRlcj8udHJpbSgpLFxuICAgICAgICAgICAgdGVtcGxhdGVGaWxlTG9jYXRpb246IGRhaWx5Tm90ZXNQbHVnaW5TZXR0aW5ncy50ZW1wbGF0ZT8udHJpbSgpLFxuICAgICAgICB9O1xuXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICB9XG5cbiAgICByZXR1cm4gdW5kZWZpbmVkO1xufSIsICJpbXBvcnQgeyBURmlsZSB9IGZyb20gXCJvYnNpZGlhblwiXG5pbXBvcnQgQmxhQmxhUGx1Z2luIGZyb20gJy4uL21haW4nXG5cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEV4cGFuZGVkVGVtcGxhdGUodGVtcGxhdGU6IFRGaWxlLCBwbHVnaW46IEJsYUJsYVBsdWdpbikgOiBQcm9taXNlPHN0cmluZz4ge1xuICAgIGNvbnN0IG1vbWVudCA9IHdpbmRvdy5tb21lbnQ7XG4gICAgY29uc3QgdGV4dCA9IChhd2FpdCBwbHVnaW4uYXBwLnZhdWx0LnJlYWQodGVtcGxhdGUpKVxuXHRcdFx0XHQucmVwbGFjZSgve3tkYXRlfX0vZ2ksIG1vbWVudCgpLmZvcm1hdChwbHVnaW4uc2V0dGluZ3MuZGF0ZUZvcm1hdCkpXG4gICAgICAgICAgICAgICAgLnJlcGxhY2UoL3t7ZGF0ZVxccypcXDpcXHMqKC4rKX19L2dpLCAobWF0Y2gsIGZvcm1hdCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbW9tZW50KCkuZm9ybWF0KGZvcm1hdCk7XG4gICAgICAgICAgICAgICAgfSlcblx0XHRcdFx0LnJlcGxhY2UoL3t7ZGF0ZVxccypcXCtcXHMqKFxcZCspfX0vZ2ksIChtYXRjaCwgbnVtYmVyKSA9PiB7XG5cdFx0XHRcdFx0Y29uc3QgZGF5c1RvQWRkID0gcGFyc2VJbnQobnVtYmVyLCAxMCk7XG5cdFx0XHRcdFx0Y29uc3QgbmV3RGF0ZSA9IG1vbWVudCgpLmFkZChkYXlzVG9BZGQsIFwiZGF5c1wiKS5mb3JtYXQocGx1Z2luLnNldHRpbmdzLmRhdGVGb3JtYXQpO1xuXHRcdFx0XHRcdHJldHVybiBuZXdEYXRlO1xuICAgICAgICAgICAgICAgIH0pXG5cdFx0XHRcdC5yZXBsYWNlKC97e2RhdGVcXHMqLVxccyooXFxkKyl9fS9naSwgKG1hdGNoLCBudW1iZXIpID0+IHtcblx0XHRcdFx0XHRjb25zdCBkYXlzVG9BZGQgPSBwYXJzZUludChudW1iZXIsIDEwKTtcblx0XHRcdFx0XHRjb25zdCBuZXdEYXRlID0gbW9tZW50KCkuYWRkKC1kYXlzVG9BZGQsIFwiZGF5c1wiKS5mb3JtYXQocGx1Z2luLnNldHRpbmdzLmRhdGVGb3JtYXQpO1xuXHRcdFx0XHRcdHJldHVybiBuZXdEYXRlO1xuICAgICAgICAgICAgICAgIH0pXG5cdFx0XHRcdC5yZXBsYWNlKC97e3RpbWV9fS9naSwgbW9tZW50KCkuZm9ybWF0KHBsdWdpbi5zZXR0aW5ncy50aW1lRm9ybWF0KSlcblx0XHRcdFx0LnJlcGxhY2UoL3t7dGl0bGV9fS9naSwgdGVtcGxhdGUuYmFzZW5hbWUpO1xuICAgIHJldHVybiB0ZXh0O1xufSIsICJpbXBvcnQgeyBTdWdnZXN0TW9kYWwsIFRGaWxlLCBBcHAsIE5vdGljZSwgRWRpdG9yfSBmcm9tIFwib2JzaWRpYW5cIjtcbmltcG9ydCB7IGdldEV4cGFuZGVkVGVtcGxhdGUgfSBmcm9tIFwiLi9VdGlsc1wiO1xuaW1wb3J0IHsgbWlncmF0ZVRlbXBsYXRlc0ZvbGRlciB9IGZyb20gXCIuL01pZ3JhdGVTZXR0aW5nc1wiO1xuaW1wb3J0IEJsYUJsYVBsdWdpbiBmcm9tIFwiLi4vbWFpblwiXG5cbmV4cG9ydCBjbGFzcyBUZW1wbGF0ZXNTdWdnZXN0TW9kYWwgZXh0ZW5kcyBTdWdnZXN0TW9kYWw8VEZpbGU+IHtcblx0c3VnZ2VzdGlvbnM6IFRGaWxlW107XG5cdGNhbGxiYWNrOiBGdW5jdGlvbjtcblxuXHRjb25zdHJ1Y3RvcihhcHA6IEFwcCwgc3VnZ2VzdGlvbnM6IFRGaWxlW10sIGNhbGxiYWNrOiBGdW5jdGlvbikge1xuXHRcdHN1cGVyKGFwcCk7XG5cdFx0dGhpcy5zdWdnZXN0aW9ucyA9IHN1Z2dlc3Rpb25zO1xuXHRcdHRoaXMuY2FsbGJhY2sgPSBjYWxsYmFjaztcblx0fVxuXHRnZXRTdWdnZXN0aW9ucyhxdWVyeTogc3RyaW5nKTogVEZpbGVbXSB7XG5cdFx0cmV0dXJuIHRoaXMuc3VnZ2VzdGlvbnMuZmlsdGVyKChpdCkgPT5cblx0XHRcdGl0LnBhdGgudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhxdWVyeS50b0xvd2VyQ2FzZSgpKVxuXHRcdCk7XG5cdH1cblxuXHRyZW5kZXJTdWdnZXN0aW9uKHRlbXBsYXRlOiBURmlsZSwgZWw6IEhUTUxFbGVtZW50KSB7XG5cdFx0ZWwuY3JlYXRlRWwoXCJkaXZcIiwgeyB0ZXh0OiB0ZW1wbGF0ZS5iYXNlbmFtZSB9KTtcblx0XHRlbC5jcmVhdGVFbChcInNtYWxsXCIsIHsgdGV4dDogdGVtcGxhdGUucGF0aCB9KTtcblx0fVxuXG5cdG9uQ2hvb3NlU3VnZ2VzdGlvbih0ZW1wbGF0ZTogVEZpbGUsIF9ldnQ6IE1vdXNlRXZlbnQgfCBLZXlib2FyZEV2ZW50KSB7XG5cdFx0dGhpcy5jYWxsYmFjayh0ZW1wbGF0ZSk7XG5cdH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGV4cGFuZFRlbXBsYXRlKHBsdWdpbjogQmxhQmxhUGx1Z2luLCBlZGl0b3I6IEVkaXRvcikge1xuICAgIGxldCB0ZW1wbGF0ZUZvbGRlclBhdGg6IHN0cmluZztcblxuICAgIGlmIChwbHVnaW4uc2V0dGluZ3MubWlncmF0ZVNldHRpbmdzRnJvbUJ1aWxkaW5UZW1wbGF0ZXMpIHtcbiAgICAgICAgbGV0IGludGVybmFsVGVtcGxhdGVGb2xkZXIgPSBtaWdyYXRlVGVtcGxhdGVzRm9sZGVyKHBsdWdpbik7XG4gICAgICAgIGlmIChpbnRlcm5hbFRlbXBsYXRlRm9sZGVyID09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgbmV3IE5vdGljZShcIkJ1aWx0aW4gcGx1Z2luIGBUZW1wbGF0ZXNgIGlzIG5vdCBhdmFpbGFibGVcIilcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHRlbXBsYXRlRm9sZGVyUGF0aCA9IGludGVybmFsVGVtcGxhdGVGb2xkZXI7XG4gICAgfVxuXG4gICAgZWxzZSB7XG4gICAgICAgIGxldCBsb2NhbFRlbXBsYXRlRm9sZGVyID0gcGx1Z2luLnNldHRpbmdzLnRlbXBsYXRlRm9sZGVyO1xuICAgICAgICBpZiAobG9jYWxUZW1wbGF0ZUZvbGRlciA9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJUZW1wbGF0ZXMgZm9sZGVyIGlzIG5vdCBzcGVjaWZpZWRcIilcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHRlbXBsYXRlRm9sZGVyUGF0aCA9IGxvY2FsVGVtcGxhdGVGb2xkZXI7XG4gICAgfVxuXG4gICAgY29uc3QgdGVtcGxhdGVOYW1lID0gZWRpdG9yLmdldFNlbGVjdGlvbigpLnRyaW0oKTtcblxuICAgIGNvbnN0IGZpbGVzID0gcGx1Z2luLmFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzKCkuZmlsdGVyKChmaWxlKSA9PlxuICAgICAgICBmaWxlLnBhdGguc3RhcnRzV2l0aCh0ZW1wbGF0ZUZvbGRlclBhdGgpXG4gICAgKVxuXG4gICAgY29uc3QgaW5zZXJ0VGVtcGxhdGUgPSBhc3luYyAodGVtcGxhdGU6IFRGaWxlKSA9PiB7XG4gICAgICAgIGNvbnN0IHRlbXBsYXRlVGV4dCA9IGF3YWl0IGdldEV4cGFuZGVkVGVtcGxhdGUodGVtcGxhdGUsIHBsdWdpbik7XG4gICAgICAgIGVkaXRvci5yZXBsYWNlU2VsZWN0aW9uKHRlbXBsYXRlVGV4dCk7XG4gICAgfVxuXG4gICAgaWYgKHRlbXBsYXRlTmFtZSA9PSBcIlwiKSB7XG4gICAgICAgIGNvbnN0IG1vZGFsID0gbmV3IFRlbXBsYXRlc1N1Z2dlc3RNb2RhbChwbHVnaW4uYXBwLCBmaWxlcywgaW5zZXJ0VGVtcGxhdGUpO1xuICAgICAgICBtb2RhbC5vcGVuKCk7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBsZXQgdGVtcGxhdGVzQ29sbGVjdGlvbiA9IGZpbGVzLmZpbHRlcihpdCA9PiBpdC5iYXNlbmFtZSA9PT0gdGVtcGxhdGVOYW1lKTtcblxuICAgIGlmICghdGVtcGxhdGVzQ29sbGVjdGlvbi5sZW5ndGgpIHtcbiAgICAgICAgbmV3IE5vdGljZShgVGVtcGxhdGUgJHt0ZW1wbGF0ZU5hbWV9IHdhcyBub3QgZm91bmRgKVxuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKHRlbXBsYXRlc0NvbGxlY3Rpb24ubGVuZ3RoID09IDEpIHtcbiAgICAgICAgbGV0IHRlbXBsYXRlID0gdGVtcGxhdGVzQ29sbGVjdGlvbi5maXJzdCgpO1xuICAgICAgICBpZiAoIXRlbXBsYXRlKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBpbnNlcnRUZW1wbGF0ZSh0ZW1wbGF0ZSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBjb25zdCBtb2RhbCA9IG5ldyBUZW1wbGF0ZXNTdWdnZXN0TW9kYWwocGx1Z2luLmFwcCwgdGVtcGxhdGVzQ29sbGVjdGlvbiwgaW5zZXJ0VGVtcGxhdGUpO1xuICAgICAgICBtb2RhbC5vcGVuKCk7XG4gICAgfVxufVxuIiwgImltcG9ydCBCbGFCbGFQbHVnaW4gZnJvbSBcIm1haW5cIjtcbmltcG9ydCB7IEVkaXRvciB9IGZyb20gXCJvYnNpZGlhblwiO1xuXG5leHBvcnQgZnVuY3Rpb24gY29weVN0cnVjdHVyYWxGb3JtYXR0aW5nKGVkaXRvcjogRWRpdG9yKSB7XG4gICAgbGV0IHRleHRUb0NvcHkgPSBlZGl0b3IuZ2V0U2VsZWN0aW9uKCk7XG4gICAgaWYgKHRleHRUb0NvcHkgPT0gXCJcIikge1xuICAgICAgICB0ZXh0VG9Db3B5ID0gZWRpdG9yLmdldFZhbHVlKCk7XG4gICAgfVxuXG4gICAgdGV4dFRvQ29weSA9IHRleHRUb0NvcHkucmVwbGFjZSgvPCgufFxcbikqPz4vZywgJycpO1xuICAgIHZhciBibG9iID0gbmV3IEJsb2IoW3RleHRUb0NvcHldLCB7IHR5cGU6ICd0ZXh0L3BsYWluJyB9KTtcbiAgICBjb25zdCBkYXRhID0gW25ldyBDbGlwYm9hcmRJdGVtKHtcbiAgICAgICAgW1widGV4dC9wbGFpblwiXTogYmxvYixcbiAgICB9KV07XG4gICAgbmF2aWdhdG9yLmNsaXBib2FyZC53cml0ZShkYXRhKTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNvcHlQbGFpbk1hcmtkb3duKHBsdWdpbjogQmxhQmxhUGx1Z2luLCBlZGl0b3I6IEVkaXRvcikge1xuICAgIGxldCB0ZXh0ID0gZWRpdG9yLmdldFNlbGVjdGlvbigpO1xuICAgIGlmICh0ZXh0ID09IFwiXCIpIHtcbiAgICAgICAgdGV4dCA9IGVkaXRvci5nZXRWYWx1ZSgpO1xuICAgIH1cblxuICAgIHRleHQgPSB0ZXh0LnJlcGxhY2UoLy0tLS4qPy0tLS9nLCAnJyk7IC8vIFJlbW92ZXMgYWxpYXNlc1xuICAgIHRleHQgPSB0ZXh0LnJlcGxhY2UoLzwoLnxcXG4pKj8+L2csICcnKTsgLy8gUmVtb3ZlcyB0YWcgZm9ybWF0dGluZ1xuICAgIHRleHQgPSB0ZXh0LnJlcGxhY2UoL1xcW1xcXlxcdytcXF0vZywgJycpO1xuXG4gICAgaWYgKHBsdWdpbi5zZXR0aW5ncy5yZW1vdmVCcmFja2V0cykge1xuICAgICAgICB0ZXh0ID0gdGV4dC5yZXBsYWNlKC9cXFtcXFsoLio/KVxcXVxcXS9nLCAnJDEnKTtcbiAgICB9XG5cbiAgICBpZiAocGx1Z2luLnNldHRpbmdzLnJlbW92ZUVtcGhhc2lzKSB7XG4gICAgICAgIHRleHQgPSB0ZXh0LnJlcGxhY2UoLz09L2csICcnKTsgLy8gUmVtb3ZlcyBoaWdobGlnaHRzXG4gICAgfVxuXG4gICAgaWYgKHBsdWdpbi5zZXR0aW5ncy5yZW1vdmVUYWdzKSB7XG4gICAgICAgIHRleHQgPSB0ZXh0LnJlcGxhY2UoLyNcXHcrL2csICcnKTtcbiAgICB9XG5cbiAgICBpZiAocGx1Z2luLnNldHRpbmdzLnJlbW92ZUNvbW1lbnRzKSB7XG4gICAgICAgIHRleHQgPSB0ZXh0LnJlcGxhY2UoLyUlLislJS9nLCAnJyk7XG4gICAgfVxuXG4gICAgdmFyIGJsb2IgPSBuZXcgQmxvYihbdGV4dF0sIHsgdHlwZTogJ3RleHQvcGxhaW4nIH0pO1xuICAgIGNvbnN0IGRhdGEgPSBbbmV3IENsaXBib2FyZEl0ZW0oe1xuICAgICAgICBbXCJ0ZXh0L3BsYWluXCJdOiBibG9iLFxuICAgIH0pXTtcbiAgICBuYXZpZ2F0b3IuY2xpcGJvYXJkLndyaXRlKGRhdGEpO1xufSJdLAogICJtYXBwaW5ncyI6ICI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsSUFBQUEsbUJBQXVEOzs7QUNBdkQsc0JBQTBDO0FBZ0JuQyxJ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bUI7QUFDbkMsY0FBTSxXQUFXLEtBQUssSUFBSSxVQUFVLGNBQWM7QUFDbEQsWUFBSSxDQUFDO0FBQVU7QUFDZixZQUFJLE9BQU8sT0FBTyxTQUFTO0FBQzNCLFlBQUksUUFBUTtBQUNaLGVBQU8sS0FBSyxRQUFRLGdCQUFnQixDQUFDLFFBQVEsU0FBUztBQUNyRCxrQkFBUTtBQUNSLGlCQUFPO0FBQUEsUUFDUixDQUFDO0FBQ0QsZUFBTyxLQUFLLFFBQVEsZ0JBQWdCLENBQUMsUUFBUSxTQUFTO0FBQ3JELGtCQUFRO0FBQ1IsaUJBQU87QUFBQSxRQUNSLENBQUM7QUFFRCxZQUFJLENBQUM7QUFDSjtBQUVELGVBQU8sU0FBUyxJQUFJO0FBQUEsTUFDckI7QUFBQSxJQUNELENBQUM7QUFDRCxTQUFLLFNBQVMsS0FBSyxnQkFBZ0I7QUFHbkMsU0FBSyxjQUFjLElBQUksaUJBQWlCLElBQUksQ0FBQztBQUFBLEVBQzlDO0FBQUEsRUFFQSxXQUFXO0FBQUEsRUFFWDtBQUFBLEVBRUEsTUFBTSxlQUFlO0FBQ3BCLFNBQUssV0FBVyxPQUFPLE9BQU8sQ0FBQyxHQUFHLGtCQUFrQixNQUFNLEtBQUssU0FBUyxDQUFDO0FBQUEsRUFDMUU7QUFBQSxFQUVBLE1BQU0sZUFBZTtBQUNwQixVQUFNLEtBQUssU0FBUyxLQUFLLFFBQVE7QUFBQSxFQUNsQztBQUNEOyIsCiAgIm5hbWVzIjogWyJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiJdCn0K
