/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __create = Object.create;
var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __getProtoOf = Object.getPrototypeOf;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toESM = (mod, isNodeMode, target) => (target = mod != null ? __create(__getProtoOf(mod)) : {}, __copyProps(
  // If the importer is in node compatibility mode or this is not an ESM
  // file that has been converted to a CommonJS file using a Babel-
  // compatible transform (i.e. "__esModule" has not been set), then set
  // "default" to the CommonJS "module.exports" for node compatibility.
  isNodeMode || !mod || !mod.__esModule ? __defProp(target, "default", { value: mod, enumerable: true }) : target,
  mod
));
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// main.ts
var main_exports = {};
__export(main_exports, {
  default: () => BlaBlaPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian4 = require("obsidian");

// src/Settings.ts
var import_obsidian = require("obsidian");
var DEFAULT_SETTINGS = {
  removeBrackets: true,
  removeEmphasis: false,
  removeTags: false,
  removeComments: false,
  migrateSettingsFromBuiltinTemplates: true,
  templateFolder: void 0,
  dateFormat: "YYYY-MM-DD",
  timeFormat: "HH:mm",
  deleteTODOs: false
};
var BlaBlaSettingTab = class extends import_obsidian.PluginSettingTab {
  constructor(plugin) {
    super(plugin.app, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    this.containerEl.createEl("h1", { text: "Template expanding" });
    new import_obsidian.Setting(containerEl).setName("Migrate settings from builtin `Templates` plugin").setDesc("If enabled, template folder is taken from builtin `Templates` settings").addToggle((toggle) => toggle.setValue(this.plugin.settings.migrateSettingsFromBuiltinTemplates).onChange(async (value) => {
      this.plugin.settings.migrateSettingsFromBuiltinTemplates = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian.Setting(containerEl).setName("Path to templates").setDesc("Path to your templates folder").addText((text) => {
      var _a;
      return text.setPlaceholder("Enter your path").setValue((_a = this.plugin.settings.templateFolder) != null ? _a : "").onChange(async (value) => {
        const trimmedValue = value.trim();
        this.plugin.settings.templateFolder = trimmedValue == "" ? DEFAULT_SETTINGS.templateFolder : trimmedValue;
        await this.plugin.saveSettings();
      });
    });
    new import_obsidian.Setting(containerEl).setName("Date format").setDesc("{{date}} in the template file will be replaced by this value").addText((text) => text.setPlaceholder("YYYY-MM-DD").setValue(this.plugin.settings.dateFormat).onChange(async (value) => {
      this.plugin.settings.dateFormat = value == "" ? DEFAULT_SETTINGS.dateFormat : value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian.Setting(containerEl).setName("Time format").setDesc("{{time}} in the template file will be replaced by this value").addText((text) => text.setPlaceholder("HH:mm").setValue(this.plugin.settings.timeFormat).onChange(async (value) => {
      this.plugin.settings.timeFormat = value == "" ? DEFAULT_SETTINGS.timeFormat : value;
      await this.plugin.saveSettings();
    }));
    this.containerEl.createEl("h1", { text: "Copy plain Markdown" });
    new import_obsidian.Setting(containerEl).setName("Remove Wikilink brackets").setDesc("If enabled, removes wikilink brackets from copied text.").addToggle((toggle) => toggle.setValue(this.plugin.settings.removeBrackets).onChange(async (value) => {
      this.plugin.settings.removeBrackets = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian.Setting(containerEl).setName("Remove text emphasis").setDesc("If enabled, removes highlights.").addToggle((toggle) => toggle.setValue(this.plugin.settings.removeEmphasis).onChange(async (value) => {
      this.plugin.settings.removeEmphasis = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian.Setting(containerEl).setName("Remove hashtags").setDesc("If enabled, removes text immediately after a hashtag.").addToggle((toggle) => toggle.setValue(this.plugin.settings.removeTags).onChange(async (value) => {
      this.plugin.settings.removeTags = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian.Setting(containerEl).setName("Remove comments").setDesc("If enabled, removes commented text.").addToggle((toggle) => toggle.setValue(this.plugin.settings.removeComments).onChange(async (value) => {
      this.plugin.settings.removeComments = value;
      await this.plugin.saveSettings();
    }));
    this.containerEl.createEl("h1", { text: "TODO lists" });
    new import_obsidian.Setting(containerEl).setName("Remove completed TODOs").setDesc("If enabled, removes completed TODOs").addToggle((toggle) => toggle.setValue(this.plugin.settings.deleteTODOs).onChange(async (value) => {
      this.plugin.settings.deleteTODOs = value;
      await this.plugin.saveSettings();
    }));
  }
};

// src/DailyNotes.ts
var import_obsidian2 = require("obsidian");

// src/MigrateSettings.ts
function migrateTemplatesFolder(plugin) {
  try {
    const obsidianTemplatesPlugin = plugin.app.internalPlugins.getPluginById("templates");
    if (!obsidianTemplatesPlugin) {
      return void 0;
    }
    const obsidianTemplatesSettings = obsidianTemplatesPlugin.instance.options;
    if (obsidianTemplatesSettings.folder) {
      return obsidianTemplatesSettings.folder;
    }
  } catch (error) {
    console.log(error.message);
  }
  return void 0;
}
function migrateDailyNotesSettings(plugin) {
  var _a, _b, _c, _d, _e;
  try {
    const dailyNotesPlugin = plugin.app.internalPlugins.getPluginById("daily-notes");
    if (!dailyNotesPlugin) {
      return void 0;
    }
    const dailyNotesPluginSettings = dailyNotesPlugin.instance.options;
    return {
      dateFormat: ((_a = dailyNotesPluginSettings.format) == null ? void 0 : _a.trim()) ? dailyNotesPluginSettings.format : DEFAULT_SETTINGS.dateFormat,
      newFileLocation: ((_b = dailyNotesPluginSettings.folder) == null ? void 0 : _b.trim()) ? (_c = dailyNotesPluginSettings.folder) == null ? void 0 : _c.trim() : "/",
      templateFileLocation: (_e = (_d = dailyNotesPluginSettings.template) == null ? void 0 : _d.trim()) != null ? _e : DEFAULT_SETTINGS.templateFolder
    };
  } catch (error) {
    console.log(error.message);
  }
  return void 0;
}

// src/Utils.ts
async function getExpandedTemplate(template, plugin) {
  const moment = window.moment;
  const text = (await plugin.app.vault.read(template)).replace(/{{date}}/gi, moment().format(plugin.settings.dateFormat)).replace(/{{date\s*\:\s*(.+)}}/gi, (match, format) => {
    return moment().format(format);
  }).replace(/{{date\s*\+\s*(\d+)}}/gi, (match, number) => {
    const daysToAdd = parseInt(number, 10);
    const newDate = moment().add(daysToAdd, "days").format(plugin.settings.dateFormat);
    return newDate;
  }).replace(/{{date\s*-\s*(\d+)}}/gi, (match, number) => {
    const daysToAdd = parseInt(number, 10);
    const newDate = moment().add(-daysToAdd, "days").format(plugin.settings.dateFormat);
    return newDate;
  }).replace(/{{time}}/gi, moment().format(plugin.settings.timeFormat)).replace(/{{title}}/gi, template.basename);
  return text;
}

// src/DailyNotes.ts
var path = __toESM(require("path"));
var DailyNotesSuggestModal = class extends import_obsidian2.SuggestModal {
  constructor(app, commands) {
    super(app);
    this.commands = commands;
  }
  getSuggestions(query) {
    return this.commands.filter(
      (it) => it.name.toLowerCase().includes(query.toLowerCase())
    );
  }
  renderSuggestion(command, el) {
    el.createEl("div", { text: command.name });
  }
  onChooseSuggestion(command, _evt) {
    command.callback ? command.callback() : console.error("Daily notes callback was not found");
  }
};
async function openOrCreateNote(plugin, daysShift = 0) {
  const dailyNotesSettings = migrateDailyNotesSettings(plugin);
  const moment = window.moment;
  if (!dailyNotesSettings) {
    new import_obsidian2.Notice("`Daily notes` plugin is not available");
    return;
  }
  let dailyNotesFolder = plugin.app.vault.getAbstractFileByPath(dailyNotesSettings.newFileLocation);
  if (!dailyNotesFolder) {
    new import_obsidian2.Notice("Daily notes folder was created");
    dailyNotesFolder = await plugin.app.vault.createFolder(dailyNotesSettings.newFileLocation);
  }
  const noteName = moment().add(daysShift, "days").format(dailyNotesSettings.dateFormat);
  const notePath = path.join(dailyNotesSettings.newFileLocation, `${noteName}.md`);
  let file = plugin.app.vault.getAbstractFileByPath(notePath);
  if (!file) {
    const templateFile = plugin.app.vault.getAbstractFileByPath(`${dailyNotesSettings.templateFileLocation}.md`);
    if (!templateFile) {
      file = await plugin.app.vault.create(notePath, "");
      return;
    }
    const templateText = await getExpandedTemplate(templateFile, plugin);
    file = await plugin.app.vault.create(notePath, templateText);
  }
  await plugin.app.workspace.openLinkText(file.path, "", true, { active: true });
}

// src/Templates.ts
var import_obsidian3 = require("obsidian");
var TemplatesSuggestModal = class extends import_obsidian3.SuggestModal {
  constructor(app, suggestions, callback) {
    super(app);
    this.suggestions = suggestions;
    this.callback = callback;
  }
  getSuggestions(query) {
    return this.suggestions.filter(
      (it) => it.path.toLowerCase().includes(query.toLowerCase())
    );
  }
  renderSuggestion(template, el) {
    el.createEl("div", { text: template.basename });
    el.createEl("small", { text: template.path });
  }
  onChooseSuggestion(template, _evt) {
    this.callback(template);
  }
};
function getTemplatesFolder(plugin) {
  if (plugin.settings.migrateSettingsFromBuiltinTemplates) {
    let internalTemplateFolder = migrateTemplatesFolder(plugin);
    if (internalTemplateFolder == void 0) {
      new import_obsidian3.Notice("Builtin plugin `Templates` is not available");
      return null;
    }
    return internalTemplateFolder;
  } else {
    let localTemplateFolder = plugin.settings.templateFolder;
    if (localTemplateFolder == void 0) {
      new import_obsidian3.Notice("Templates folder is not specified");
      return null;
    }
    return localTemplateFolder;
  }
}
function expandTemplate(plugin, editor) {
  const templateFolderPath = getTemplatesFolder(plugin);
  if (!templateFolderPath)
    return;
  const templateName = editor.getSelection().trim();
  const files = plugin.app.vault.getMarkdownFiles().filter(
    (file) => file.path.startsWith(templateFolderPath)
  );
  const insertTemplate = async (template) => {
    const templateText = await getExpandedTemplate(template, plugin);
    editor.replaceSelection(templateText);
  };
  if (templateName == "") {
    const modal = new TemplatesSuggestModal(plugin.app, files, insertTemplate);
    modal.open();
    return;
  }
  let templatesCollection = files.filter((it) => it.basename === templateName);
  if (!templatesCollection.length) {
    new import_obsidian3.Notice(`Template ${templateName} was not found`);
    return;
  }
  if (templatesCollection.length == 1) {
    let template = templatesCollection.first();
    if (!template)
      return;
    insertTemplate(template);
  } else {
    const modal = new TemplatesSuggestModal(plugin.app, templatesCollection, insertTemplate);
    modal.open();
  }
}

// src/CopyPasteImprovements.ts
function copyStructuralFormatting(editor) {
  let textToCopy = editor.getSelection();
  if (textToCopy == "") {
    textToCopy = editor.getValue();
  }
  textToCopy = textToCopy.replace(/<(.|\n)*?>/g, "");
  var blob = new Blob([textToCopy], { type: "text/plain" });
  const data = [new ClipboardItem({
    ["text/plain"]: blob
  })];
  navigator.clipboard.write(data);
}
async function copyPlainMarkdown(plugin, editor) {
  let text = editor.getSelection();
  if (text == "") {
    text = editor.getValue();
  }
  text = text.replace(/---.*?---/g, "");
  text = text.replace(/<(.|\n)*?>/g, "");
  text = text.replace(/\[\^\w+\]/g, "");
  if (plugin.settings.removeBrackets) {
    text = text.replace(/\[\[(.*?)\]\]/g, "$1");
  }
  if (plugin.settings.removeEmphasis) {
    text = text.replace(/==/g, "");
  }
  if (plugin.settings.removeTags) {
    text = text.replace(/#\w+/g, "");
  }
  if (plugin.settings.removeComments) {
    text = text.replace(/%%.+%%/g, "");
  }
  var blob = new Blob([text], { type: "text/plain" });
  const data = [new ClipboardItem({
    ["text/plain"]: blob
  })];
  navigator.clipboard.write(data);
}

// main.ts
var BlaBlaPlugin = class extends import_obsidian4.Plugin {
  async onload() {
    await this.loadSettings();
    const expandTemplateCommand = this.addCommand({
      id: "expand-template",
      name: "Expand template",
      editorCallback: (editor) => expandTemplate(this, editor)
    });
    const copyPlaiMarkdownCommand = this.addCommand({
      id: "copy-plain-markdown",
      name: "Copy plain markdown",
      editorCallback: (editor) => copyPlainMarkdown(this, editor)
    });
    const copyStructuralFormattingCommand = this.addCommand({
      id: "copy-structural-formatting",
      name: "Copy structural formatting only",
      editorCallback: (editor) => copyStructuralFormatting(editor)
    });
    const openTomorrowNoteCommand = this.addCommand({
      id: "open-note-tomorrow",
      name: "Open tomorrow`s note",
      callback: () => {
        openOrCreateNote(this, 1);
      }
    });
    const openYesterdayNoteCommand = this.addCommand({
      id: "open-note-yesterday",
      name: "Open yesterday`s note",
      callback: () => {
        openOrCreateNote(this, -1);
      }
    });
    const openTodayNoteCommand = this.addCommand({
      id: "open-note-today",
      name: "Open today`s note",
      callback: () => {
        openOrCreateNote(this);
      }
    });
    this.addRibbonIcon("calendar", "Open daily note", () => {
      const modal = new DailyNotesSuggestModal(this.app, [openTodayNoteCommand, openYesterdayNoteCommand, openTomorrowNoteCommand]);
      modal.open();
    });
    const removeTODOsCallback = () => {
      const activeView = this.app.workspace.getActiveViewOfType(import_obsidian4.MarkdownView);
      if (!activeView)
        return;
      const editor = activeView.editor;
      const noteFile = this.app.workspace.getActiveFile();
      if (!noteFile)
        return;
      let text = editor.getValue();
      let found = false;
      text = text.replace(/\-\s\[\x\]\s([^\n]+)/g, (_match, _cap) => {
        found = true;
        return "";
      });
      if (!found)
        return;
      editor.setValue(text);
    };
    const removeTODOsTimeout = 2e3;
    let inputTimeout;
    if (this.settings.deleteTODOs)
      inputTimeout = setTimeout(removeTODOsCallback, removeTODOsTimeout);
    this.registerEvent(this.app.workspace.on("editor-change", (_editor, _info) => {
      if (!this.settings.deleteTODOs)
        return;
      clearTimeout(inputTimeout);
      inputTimeout = setTimeout(removeTODOsCallback, removeTODOsTimeout);
    }));
    const removeEmptyLines = this.addCommand({
      id: "remove-empty-lines",
      name: "Remove empty lines",
      editorCallback: (editor) => {
        const noteFile = this.app.workspace.getActiveFile();
        if (!noteFile)
          return;
        let text = editor.getValue();
        let found = false;
        text = text.replace(/^\s*[\r\n]*/g, (_match, _cap) => {
          found = true;
          return "";
        });
        text = text.replace(/(\r?\n){3,}/g, (_match, _cap) => {
          found = true;
          return "\n\n";
        });
        if (!found)
          return;
        editor.setValue(text);
      }
    });
    this.addSettingTab(new BlaBlaSettingTab(this));
  }
  onunload() {
  }
  async loadSettings() {
    this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.loadData());
  }
  async saveSettings() {
    await this.saveData(this.settings);
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibWFpbi50cyIsICJzcmMvU2V0dGluZ3MudHMiLCAic3JjL0RhaWx5Tm90ZXMudHMiLCAic3JjL01pZ3JhdGVTZXR0aW5ncy50cyIsICJzcmMvVXRpbHMudHMiLCAic3JjL1RlbXBsYXRlcy50cyIsICJzcmMvQ29weVBhc3RlSW1wcm92ZW1lbnRzLnRzIl0sCiAgInNvdXJjZXNDb250ZW50IjogWyJpbXBvcnQgeyBFZGl0b3IsIFBsdWdpbiwgTWFya2Rvd25WaWV3LCB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB7IEJsYUJsYVNldHRpbmdUYWIsIFBsdWdpblNldHRpbmdzLCBERUZBVUxUX1NFVFRJTkdTIH0gZnJvbSBcInNyYy9TZXR0aW5nc1wiXG5pbXBvcnQgeyBEYWlseU5vdGVzU3VnZ2VzdE1vZGFsLCBvcGVuT3JDcmVhdGVOb3RlIH0gZnJvbSAnc3JjL0RhaWx5Tm90ZXMnO1xuaW1wb3J0IHsgZXhwYW5kVGVtcGxhdGUgfSBmcm9tICdzcmMvVGVtcGxhdGVzJztcbmltcG9ydCB7IGNvcHlQbGFpbk1hcmtkb3duLCBjb3B5U3RydWN0dXJhbEZvcm1hdHRpbmcgfSBmcm9tICdzcmMvQ29weVBhc3RlSW1wcm92ZW1lbnRzJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQmxhQmxhUGx1Z2luIGV4dGVuZHMgUGx1Z2luIHtcblx0c2V0dGluZ3M6IFBsdWdpblNldHRpbmdzO1xuXG5cdGFzeW5jIG9ubG9hZCgpIHtcblx0XHRhd2FpdCB0aGlzLmxvYWRTZXR0aW5ncygpO1xuXG5cdFx0Y29uc3QgZXhwYW5kVGVtcGxhdGVDb21tYW5kID0gdGhpcy5hZGRDb21tYW5kKHtcblx0XHRcdGlkOiAnZXhwYW5kLXRlbXBsYXRlJyxcblx0XHRcdG5hbWU6ICdFeHBhbmQgdGVtcGxhdGUnLFxuXHRcdFx0ZWRpdG9yQ2FsbGJhY2s6IChlZGl0b3I6IGFueSkgPT4gZXhwYW5kVGVtcGxhdGUodGhpcywgZWRpdG9yKVxuXHRcdH0pO1xuXG5cdFx0Y29uc3QgY29weVBsYWlNYXJrZG93bkNvbW1hbmQgPSB0aGlzLmFkZENvbW1hbmQoe1xuXHRcdFx0aWQ6ICdjb3B5LXBsYWluLW1hcmtkb3duJyxcblx0XHRcdG5hbWU6ICdDb3B5IHBsYWluIG1hcmtkb3duJyxcblx0XHRcdGVkaXRvckNhbGxiYWNrOiAoZWRpdG9yOiBhbnkpID0+IGNvcHlQbGFpbk1hcmtkb3duKHRoaXMsIGVkaXRvcilcblx0XHR9KTtcblxuXG5cdFx0Y29uc3QgY29weVN0cnVjdHVyYWxGb3JtYXR0aW5nQ29tbWFuZCA9IHRoaXMuYWRkQ29tbWFuZCh7XG5cdFx0XHRpZDogJ2NvcHktc3RydWN0dXJhbC1mb3JtYXR0aW5nJyxcblx0XHRcdG5hbWU6ICdDb3B5IHN0cnVjdHVyYWwgZm9ybWF0dGluZyBvbmx5Jyxcblx0XHRcdGVkaXRvckNhbGxiYWNrOiAoZWRpdG9yOiBhbnkpID0+IGNvcHlTdHJ1Y3R1cmFsRm9ybWF0dGluZyhlZGl0b3IpXG5cdFx0fSk7XG5cblxuXHRcdGNvbnN0IG9wZW5Ub21vcnJvd05vdGVDb21tYW5kID0gdGhpcy5hZGRDb21tYW5kKHtcblx0XHRcdGlkOiAnb3Blbi1ub3RlLXRvbW9ycm93Jyxcblx0XHRcdG5hbWU6ICdPcGVuIHRvbW9ycm93YHMgbm90ZScsXG5cdFx0XHRjYWxsYmFjazogKCkgPT4ge1xuXHRcdFx0XHRvcGVuT3JDcmVhdGVOb3RlKHRoaXMsIDEpXG5cdFx0XHR9XG5cdFx0fSk7XG5cblx0XHRjb25zdCBvcGVuWWVzdGVyZGF5Tm90ZUNvbW1hbmQgPSB0aGlzLmFkZENvbW1hbmQoe1xuXHRcdFx0aWQ6ICdvcGVuLW5vdGUteWVzdGVyZGF5Jyxcblx0XHRcdG5hbWU6ICdPcGVuIHllc3RlcmRheWBzIG5vdGUnLFxuXHRcdFx0Y2FsbGJhY2s6ICgpID0+IHtcblx0XHRcdFx0b3Blbk9yQ3JlYXRlTm90ZSh0aGlzLCAtMSlcblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdGNvbnN0IG9wZW5Ub2RheU5vdGVDb21tYW5kID0gdGhpcy5hZGRDb21tYW5kKHtcblx0XHRcdGlkOiAnb3Blbi1ub3RlLXRvZGF5Jyxcblx0XHRcdG5hbWU6ICdPcGVuIHRvZGF5YHMgbm90ZScsXG5cdFx0XHRjYWxsYmFjazogKCkgPT4ge1xuXHRcdFx0XHRvcGVuT3JDcmVhdGVOb3RlKHRoaXMpXG5cdFx0XHR9XG5cdFx0fSk7XG5cblxuXHRcdHRoaXMuYWRkUmliYm9uSWNvbihcImNhbGVuZGFyXCIsIFwiT3BlbiBkYWlseSBub3RlXCIsICgpID0+IHtcblx0XHRcdGNvbnN0IG1vZGFsID0gbmV3IERhaWx5Tm90ZXNTdWdnZXN0TW9kYWwodGhpcy5hcHAsIFtvcGVuVG9kYXlOb3RlQ29tbWFuZCwgb3Blblllc3RlcmRheU5vdGVDb21tYW5kLCBvcGVuVG9tb3Jyb3dOb3RlQ29tbWFuZF0pO1xuXHRcdFx0bW9kYWwub3BlbigpXG5cdFx0fSk7XG5cblxuXHRcdGNvbnN0IHJlbW92ZVRPRE9zQ2FsbGJhY2sgPSAoKSA9PiB7XG5cdFx0XHRjb25zdCBhY3RpdmVWaWV3ID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZVZpZXdPZlR5cGUoTWFya2Rvd25WaWV3KTtcblx0XHRcdGlmICghYWN0aXZlVmlldylcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0Y29uc3QgZWRpdG9yID0gYWN0aXZlVmlldy5lZGl0b3I7XG5cdFx0XHRjb25zdCBub3RlRmlsZSA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVGaWxlKCk7XG5cdFx0XHRpZiAoIW5vdGVGaWxlKSByZXR1cm47XG5cdFx0XHRsZXQgdGV4dCA9IGVkaXRvci5nZXRWYWx1ZSgpO1xuXHRcdFx0bGV0IGZvdW5kID0gZmFsc2U7XG5cdFx0XHR0ZXh0ID0gdGV4dC5yZXBsYWNlKC9cXC1cXHNcXFtcXHhcXF1cXHMoW15cXG5dKykvZywgKF9tYXRjaCwgX2NhcCkgPT4ge1xuXHRcdFx0XHRmb3VuZCA9IHRydWU7XG5cdFx0XHRcdHJldHVybiAnJztcblx0XHRcdH0pO1xuXHRcdFx0aWYgKCFmb3VuZClcblx0XHRcdFx0cmV0dXJuO1xuXG5cdFx0XHRlZGl0b3Iuc2V0VmFsdWUodGV4dCk7XG5cdFx0fVxuXHRcdGNvbnN0IHJlbW92ZVRPRE9zVGltZW91dCA9IDIwMDA7XG5cblxuXHRcdGxldCBpbnB1dFRpbWVvdXQ6IE5vZGVKUy5UaW1lb3V0O1xuXHRcdGlmICh0aGlzLnNldHRpbmdzLmRlbGV0ZVRPRE9zKVxuXHRcdFx0aW5wdXRUaW1lb3V0ID0gc2V0VGltZW91dChyZW1vdmVUT0RPc0NhbGxiYWNrLCByZW1vdmVUT0RPc1RpbWVvdXQpO1xuXHRcdHRoaXMucmVnaXN0ZXJFdmVudCh0aGlzLmFwcC53b3Jrc3BhY2Uub24oJ2VkaXRvci1jaGFuZ2UnLCAoX2VkaXRvciwgX2luZm8pID0+IHtcblx0XHRcdGlmICghdGhpcy5zZXR0aW5ncy5kZWxldGVUT0RPcylcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0Y2xlYXJUaW1lb3V0KGlucHV0VGltZW91dCk7XG5cdFx0XHRpbnB1dFRpbWVvdXQgPSBzZXRUaW1lb3V0KHJlbW92ZVRPRE9zQ2FsbGJhY2ssIHJlbW92ZVRPRE9zVGltZW91dCk7XG5cdFx0fSkpXG5cblx0XHRjb25zdCByZW1vdmVFbXB0eUxpbmVzID0gdGhpcy5hZGRDb21tYW5kKHtcblx0XHRcdGlkOiAncmVtb3ZlLWVtcHR5LWxpbmVzJyxcblx0XHRcdG5hbWU6ICdSZW1vdmUgZW1wdHkgbGluZXMnLFxuXHRcdFx0ZWRpdG9yQ2FsbGJhY2s6IChlZGl0b3I6IEVkaXRvcikgPT4ge1xuXHRcdFx0XHRjb25zdCBub3RlRmlsZSA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVGaWxlKCk7XG5cdFx0XHRcdGlmICghbm90ZUZpbGUpIHJldHVybjtcblx0XHRcdFx0bGV0IHRleHQgPSBlZGl0b3IuZ2V0VmFsdWUoKVxuXHRcdFx0XHRsZXQgZm91bmQgPSBmYWxzZTtcblx0XHRcdFx0dGV4dCA9IHRleHQucmVwbGFjZSgvXlxccypbXFxyXFxuXSovZywgKF9tYXRjaCwgX2NhcCkgPT4ge1xuXHRcdFx0XHRcdGZvdW5kID0gdHJ1ZTtcblx0XHRcdFx0XHRyZXR1cm4gJyc7XG5cdFx0XHRcdH0pO1xuXHRcdFx0XHR0ZXh0ID0gdGV4dC5yZXBsYWNlKC8oXFxyP1xcbil7Myx9L2csIChfbWF0Y2gsIF9jYXApID0+IHtcblx0XHRcdFx0XHRmb3VuZCA9IHRydWU7XG5cdFx0XHRcdFx0cmV0dXJuICdcXG5cXG4nO1xuXHRcdFx0XHR9KTtcblxuXHRcdFx0XHRpZiAoIWZvdW5kKVxuXHRcdFx0XHRcdHJldHVybjtcblxuXHRcdFx0XHRlZGl0b3Iuc2V0VmFsdWUodGV4dCk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cblxuXHRcdHRoaXMuYWRkU2V0dGluZ1RhYihuZXcgQmxhQmxhU2V0dGluZ1RhYih0aGlzKSk7XG5cdH1cblxuXHRvbnVubG9hZCgpIHtcblxuXHR9XG5cblx0YXN5bmMgbG9hZFNldHRpbmdzKCkge1xuXHRcdHRoaXMuc2V0dGluZ3MgPSBPYmplY3QuYXNzaWduKHt9LCBERUZBVUxUX1NFVFRJTkdTLCBhd2FpdCB0aGlzLmxvYWREYXRhKCkpO1xuXHR9XG5cblx0YXN5bmMgc2F2ZVNldHRpbmdzKCkge1xuXHRcdGF3YWl0IHRoaXMuc2F2ZURhdGEodGhpcy5zZXR0aW5ncyk7XG5cdH1cbn0iLCAiaW1wb3J0IHsgUGx1Z2luU2V0dGluZ1RhYiwgU2V0dGluZyB9IGZyb20gXCJvYnNpZGlhblwiXG5pbXBvcnQgQmxhQmxhUGx1Z2luIGZyb20gXCIuLi9tYWluXCJcblxuZXhwb3J0IGludGVyZmFjZSBQbHVnaW5TZXR0aW5ncyB7XG5cdHJlbW92ZUJyYWNrZXRzOiBib29sZWFuO1xuXHRyZW1vdmVFbXBoYXNpczogYm9vbGVhbjtcblx0cmVtb3ZlVGFnczogYm9vbGVhbjtcblx0cmVtb3ZlQ29tbWVudHM6IGJvb2xlYW47XG4gICAgbWlncmF0ZVNldHRpbmdzRnJvbUJ1aWx0aW5UZW1wbGF0ZXM6IGJvb2xlYW47XG5cdHRlbXBsYXRlRm9sZGVyOiBzdHJpbmcgfCB1bmRlZmluZWQ7XG4gICAgZGF0ZUZvcm1hdDogc3RyaW5nO1xuICAgIHRpbWVGb3JtYXQ6IHN0cmluZztcbiAgICBkZWxldGVUT0RPczogYm9vbGVhbjtcbn1cblxuXG5leHBvcnQgY29uc3QgREVGQVVMVF9TRVRUSU5HUzogUGx1Z2luU2V0dGluZ3MgPSB7XG5cdHJlbW92ZUJyYWNrZXRzOiB0cnVlLFxuXHRyZW1vdmVFbXBoYXNpczogZmFsc2UsXG5cdHJlbW92ZVRhZ3M6IGZhbHNlLFxuXHRyZW1vdmVDb21tZW50czogZmFsc2UsXG4gICAgbWlncmF0ZVNldHRpbmdzRnJvbUJ1aWx0aW5UZW1wbGF0ZXM6IHRydWUsXG5cdHRlbXBsYXRlRm9sZGVyOiB1bmRlZmluZWQsXG4gICAgZGF0ZUZvcm1hdDogXCJZWVlZLU1NLUREXCIsXG4gICAgdGltZUZvcm1hdDogXCJISDptbVwiLFxuICAgIGRlbGV0ZVRPRE9zOiBmYWxzZVxufVxuXG5leHBvcnQgY2xhc3MgQmxhQmxhU2V0dGluZ1RhYiBleHRlbmRzIFBsdWdpblNldHRpbmdUYWIge1xuXHRwbHVnaW46IEJsYUJsYVBsdWdpbjtcblxuXHRjb25zdHJ1Y3RvcihwbHVnaW46IEJsYUJsYVBsdWdpbikge1xuXHRcdHN1cGVyKHBsdWdpbi5hcHAsIHBsdWdpbik7XG5cdFx0dGhpcy5wbHVnaW4gPSBwbHVnaW47XG5cdH1cblxuXHRkaXNwbGF5KCk6IHZvaWQge1xuXHRcdGNvbnN0IHsgY29udGFpbmVyRWwgfSA9IHRoaXM7XG5cblx0XHRjb250YWluZXJFbC5lbXB0eSgpO1xuICAgICAgICB0aGlzLmNvbnRhaW5lckVsLmNyZWF0ZUVsKFwiaDFcIiwgeyB0ZXh0OiBcIlRlbXBsYXRlIGV4cGFuZGluZ1wiIH0pO1xuXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuXHRcdFx0LnNldE5hbWUoJ01pZ3JhdGUgc2V0dGluZ3MgZnJvbSBidWlsdGluIGBUZW1wbGF0ZXNgIHBsdWdpbicpXG5cdFx0XHQuc2V0RGVzYygnSWYgZW5hYmxlZCwgdGVtcGxhdGUgZm9sZGVyIGlzIHRha2VuIGZyb20gYnVpbHRpbiBgVGVtcGxhdGVzYCBzZXR0aW5ncycpXG5cdFx0XHQuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB0b2dnbGVcblx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLm1pZ3JhdGVTZXR0aW5nc0Zyb21CdWlsdGluVGVtcGxhdGVzKVxuXHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MubWlncmF0ZVNldHRpbmdzRnJvbUJ1aWx0aW5UZW1wbGF0ZXMgPSB2YWx1ZTtcblx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0fSkpO1xuXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG5cdFx0XHQuc2V0TmFtZSgnUGF0aCB0byB0ZW1wbGF0ZXMnKVxuXHRcdFx0LnNldERlc2MoJ1BhdGggdG8geW91ciB0ZW1wbGF0ZXMgZm9sZGVyJylcblx0XHRcdC5hZGRUZXh0KHRleHQgPT4gdGV4dFxuXHRcdFx0XHQuc2V0UGxhY2Vob2xkZXIoJ0VudGVyIHlvdXIgcGF0aCcpXG5cdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy50ZW1wbGF0ZUZvbGRlciA/PyBcIlwiKVxuXHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHRyaW1tZWRWYWx1ZSA9IHZhbHVlLnRyaW0oKVxuXHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLnRlbXBsYXRlRm9sZGVyID0gdHJpbW1lZFZhbHVlID09IFwiXCIgPyBERUZBVUxUX1NFVFRJTkdTLnRlbXBsYXRlRm9sZGVyIDogdHJpbW1lZFZhbHVlO1xuXHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHR9KSk7XG5cbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG5cdFx0XHQuc2V0TmFtZSgnRGF0ZSBmb3JtYXQnKVxuXHRcdFx0LnNldERlc2MoJ3t7ZGF0ZX19IGluIHRoZSB0ZW1wbGF0ZSBmaWxlIHdpbGwgYmUgcmVwbGFjZWQgYnkgdGhpcyB2YWx1ZScpXG5cdFx0XHQuYWRkVGV4dCh0ZXh0ID0+IHRleHRcblx0XHRcdFx0LnNldFBsYWNlaG9sZGVyKCdZWVlZLU1NLUREJylcblx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmRhdGVGb3JtYXQpXG5cdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcblx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5kYXRlRm9ybWF0ID0gdmFsdWUgPT0gXCJcIiA/IERFRkFVTFRfU0VUVElOR1MuZGF0ZUZvcm1hdCA6IHZhbHVlO1xuXHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHR9KSk7XG5cbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG5cdFx0XHQuc2V0TmFtZSgnVGltZSBmb3JtYXQnKVxuXHRcdFx0LnNldERlc2MoJ3t7dGltZX19IGluIHRoZSB0ZW1wbGF0ZSBmaWxlIHdpbGwgYmUgcmVwbGFjZWQgYnkgdGhpcyB2YWx1ZScpXG5cdFx0XHQuYWRkVGV4dCh0ZXh0ID0+IHRleHRcblx0XHRcdFx0LnNldFBsYWNlaG9sZGVyKCdISDptbScpXG5cdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy50aW1lRm9ybWF0KVxuXHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MudGltZUZvcm1hdCA9IHZhbHVlID09IFwiXCIgPyBERUZBVUxUX1NFVFRJTkdTLnRpbWVGb3JtYXQgOiB2YWx1ZTtcblx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0fSkpO1xuXG4gICAgICAgIHRoaXMuY29udGFpbmVyRWwuY3JlYXRlRWwoXCJoMVwiLCB7IHRleHQ6IFwiQ29weSBwbGFpbiBNYXJrZG93blwiIH0pO1xuXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG5cdFx0XHQuc2V0TmFtZShcIlJlbW92ZSBXaWtpbGluayBicmFja2V0c1wiKVxuXHRcdFx0LnNldERlc2MoXCJJZiBlbmFibGVkLCByZW1vdmVzIHdpa2lsaW5rIGJyYWNrZXRzIGZyb20gY29waWVkIHRleHQuXCIpXG5cdFx0XHQuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB0b2dnbGVcblx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnJlbW92ZUJyYWNrZXRzKVxuXHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MucmVtb3ZlQnJhY2tldHMgPSB2YWx1ZTtcblx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0fSkpO1xuXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG5cdFx0XHQuc2V0TmFtZShcIlJlbW92ZSB0ZXh0IGVtcGhhc2lzXCIpXG5cdFx0XHQuc2V0RGVzYyhcIklmIGVuYWJsZWQsIHJlbW92ZXMgaGlnaGxpZ2h0cy5cIilcblx0XHRcdC5hZGRUb2dnbGUodG9nZ2xlID0+IHRvZ2dsZVxuXHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MucmVtb3ZlRW1waGFzaXMpXG5cdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcblx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5yZW1vdmVFbXBoYXNpcyA9IHZhbHVlO1xuXHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHR9KSk7XG5cblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcblx0XHRcdC5zZXROYW1lKFwiUmVtb3ZlIGhhc2h0YWdzXCIpXG5cdFx0XHQuc2V0RGVzYyhcIklmIGVuYWJsZWQsIHJlbW92ZXMgdGV4dCBpbW1lZGlhdGVseSBhZnRlciBhIGhhc2h0YWcuXCIpXG5cdFx0XHQuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB0b2dnbGVcblx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnJlbW92ZVRhZ3MpXG5cdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcblx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5yZW1vdmVUYWdzID0gdmFsdWU7XG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdH0pKTtcblxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuXHRcdFx0LnNldE5hbWUoXCJSZW1vdmUgY29tbWVudHNcIilcblx0XHRcdC5zZXREZXNjKFwiSWYgZW5hYmxlZCwgcmVtb3ZlcyBjb21tZW50ZWQgdGV4dC5cIilcblx0XHRcdC5hZGRUb2dnbGUodG9nZ2xlID0+IHRvZ2dsZVxuXHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MucmVtb3ZlQ29tbWVudHMpXG5cdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcblx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5yZW1vdmVDb21tZW50cyA9IHZhbHVlO1xuXHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHR9KSk7XG5cbiAgICAgICAgdGhpcy5jb250YWluZXJFbC5jcmVhdGVFbChcImgxXCIsIHsgdGV4dDogXCJUT0RPIGxpc3RzXCIgfSk7XG5cbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgICAgICAuc2V0TmFtZShcIlJlbW92ZSBjb21wbGV0ZWQgVE9ET3NcIilcbiAgICAgICAgICAgIC5zZXREZXNjKFwiSWYgZW5hYmxlZCwgcmVtb3ZlcyBjb21wbGV0ZWQgVE9ET3NcIilcbiAgICAgICAgICAgIC5hZGRUb2dnbGUodG9nZ2xlID0+IHRvZ2dsZVxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5kZWxldGVUT0RPcylcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmRlbGV0ZVRPRE9zID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgIH0pKTtcblx0fVxufSIsICJpbXBvcnQgeyBTdWdnZXN0TW9kYWwsIENvbW1hbmQsIE5vdGljZSwgQXBwLCBURmlsZSB9IGZyb20gXCJvYnNpZGlhblwiO1xuaW1wb3J0IHsgbWlncmF0ZURhaWx5Tm90ZXNTZXR0aW5ncyB9IGZyb20gXCIuL01pZ3JhdGVTZXR0aW5nc1wiO1xuaW1wb3J0IHsgZ2V0RXhwYW5kZWRUZW1wbGF0ZSB9IGZyb20gXCIuL1V0aWxzXCI7XG5pbXBvcnQgKiBhcyBwYXRoIGZyb20gXCJwYXRoXCJcbmltcG9ydCBCbGFCbGFQbHVnaW4gZnJvbSBcIm1haW5cIjtcblxuZXhwb3J0IGNsYXNzIERhaWx5Tm90ZXNTdWdnZXN0TW9kYWwgZXh0ZW5kcyBTdWdnZXN0TW9kYWw8Q29tbWFuZD4ge1xuXHRjb21tYW5kczogQ29tbWFuZFtdO1xuXG5cdGNvbnN0cnVjdG9yKGFwcDogQXBwLCBjb21tYW5kczogQ29tbWFuZFtdKSB7XG5cdFx0c3VwZXIoYXBwKTtcblx0XHR0aGlzLmNvbW1hbmRzID0gY29tbWFuZHM7XG5cdH1cblx0Z2V0U3VnZ2VzdGlvbnMocXVlcnk6IHN0cmluZyk6IENvbW1hbmRbXSB7XG5cdFx0cmV0dXJuIHRoaXMuY29tbWFuZHMuZmlsdGVyKChpdCkgPT5cblx0XHRcdGl0Lm5hbWUudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhxdWVyeS50b0xvd2VyQ2FzZSgpKVxuXHRcdCk7XG5cdH1cblxuXHRyZW5kZXJTdWdnZXN0aW9uKGNvbW1hbmQ6IENvbW1hbmQsIGVsOiBIVE1MRWxlbWVudCkge1xuXHRcdGVsLmNyZWF0ZUVsKFwiZGl2XCIsIHsgdGV4dDogY29tbWFuZC5uYW1lIH0pO1xuXHR9XG5cblx0b25DaG9vc2VTdWdnZXN0aW9uKGNvbW1hbmQ6IENvbW1hbmQsIF9ldnQ6IE1vdXNlRXZlbnQgfCBLZXlib2FyZEV2ZW50KSB7XG5cdFx0Y29tbWFuZC5jYWxsYmFjayA/IGNvbW1hbmQuY2FsbGJhY2soKSA6IGNvbnNvbGUuZXJyb3IoXCJEYWlseSBub3RlcyBjYWxsYmFjayB3YXMgbm90IGZvdW5kXCIpO1xuXG5cdH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIG9wZW5PckNyZWF0ZU5vdGUocGx1Z2luOiBCbGFCbGFQbHVnaW4sIGRheXNTaGlmdDogbnVtYmVyID0gMCkge1xuICAgIGNvbnN0IGRhaWx5Tm90ZXNTZXR0aW5ncyA9IG1pZ3JhdGVEYWlseU5vdGVzU2V0dGluZ3MocGx1Z2luKTtcbiAgICBjb25zdCBtb21lbnQgPSB3aW5kb3cubW9tZW50O1xuXG4gICAgaWYgKCFkYWlseU5vdGVzU2V0dGluZ3MpIHtcbiAgICAgICAgbmV3IE5vdGljZShcImBEYWlseSBub3Rlc2AgcGx1Z2luIGlzIG5vdCBhdmFpbGFibGVcIilcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGxldCBkYWlseU5vdGVzRm9sZGVyID0gcGx1Z2luLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZGFpbHlOb3Rlc1NldHRpbmdzLm5ld0ZpbGVMb2NhdGlvbik7XG4gICAgaWYgKCFkYWlseU5vdGVzRm9sZGVyKSB7XG4gICAgICAgIG5ldyBOb3RpY2UoXCJEYWlseSBub3RlcyBmb2xkZXIgd2FzIGNyZWF0ZWRcIilcbiAgICAgICAgZGFpbHlOb3Rlc0ZvbGRlciA9IGF3YWl0IHBsdWdpbi5hcHAudmF1bHQuY3JlYXRlRm9sZGVyKGRhaWx5Tm90ZXNTZXR0aW5ncy5uZXdGaWxlTG9jYXRpb24pO1xuICAgIH1cblxuICAgIGNvbnN0IG5vdGVOYW1lID0gbW9tZW50KCkuYWRkKGRheXNTaGlmdCwgXCJkYXlzXCIpLmZvcm1hdChkYWlseU5vdGVzU2V0dGluZ3MuZGF0ZUZvcm1hdCk7XG4gICAgY29uc3Qgbm90ZVBhdGggPSBwYXRoLmpvaW4oZGFpbHlOb3Rlc1NldHRpbmdzLm5ld0ZpbGVMb2NhdGlvbiwgYCR7bm90ZU5hbWV9Lm1kYCk7XG4gICAgbGV0IGZpbGUgPSBwbHVnaW4uYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChub3RlUGF0aCkgYXMgVEZpbGU7XG5cbiAgICBpZiAoIWZpbGUpIHtcbiAgICAgICAgY29uc3QgdGVtcGxhdGVGaWxlID0gcGx1Z2luLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoYCR7ZGFpbHlOb3Rlc1NldHRpbmdzLnRlbXBsYXRlRmlsZUxvY2F0aW9ufS5tZGApIGFzIFRGaWxlO1xuICAgICAgICBpZiAoIXRlbXBsYXRlRmlsZSkge1xuICAgICAgICAgICAgZmlsZSA9IGF3YWl0IHBsdWdpbi5hcHAudmF1bHQuY3JlYXRlKG5vdGVQYXRoLCBcIlwiKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB0ZW1wbGF0ZVRleHQgPSBhd2FpdCBnZXRFeHBhbmRlZFRlbXBsYXRlKHRlbXBsYXRlRmlsZSwgcGx1Z2luKTtcbiAgICAgICAgZmlsZSA9IGF3YWl0IHBsdWdpbi5hcHAudmF1bHQuY3JlYXRlKG5vdGVQYXRoLCB0ZW1wbGF0ZVRleHQpO1xuICAgIH1cblxuICAgIGF3YWl0IHBsdWdpbi5hcHAud29ya3NwYWNlLm9wZW5MaW5rVGV4dChmaWxlLnBhdGgsICcnLCB0cnVlLCB7IGFjdGl2ZTogdHJ1ZSB9KTtcbn0iLCAiaW1wb3J0IEJsYUJsYVBsdWdpbiBmcm9tIFwiLi4vbWFpblwiO1xuaW1wb3J0IHsgREVGQVVMVF9TRVRUSU5HUyB9IGZyb20gXCIuL1NldHRpbmdzXCI7XG5cbmV4cG9ydCBmdW5jdGlvbiBtaWdyYXRlVGVtcGxhdGVzRm9sZGVyKHBsdWdpbjogQmxhQmxhUGx1Z2luKTogc3RyaW5nIHwgdW5kZWZpbmVkIHtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCBvYnNpZGlhblRlbXBsYXRlc1BsdWdpbiA9XG4gICAgICAgICAgICAocGx1Z2luLmFwcCBhcyBhbnkpLmludGVybmFsUGx1Z2lucy5nZXRQbHVnaW5CeUlkKFwidGVtcGxhdGVzXCIpO1xuXG4gICAgICAgIGlmICghb2JzaWRpYW5UZW1wbGF0ZXNQbHVnaW4pIHtcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBvYnNpZGlhblRlbXBsYXRlc1NldHRpbmdzID1cbiAgICAgICAgICAgIG9ic2lkaWFuVGVtcGxhdGVzUGx1Z2luLmluc3RhbmNlLm9wdGlvbnM7XG4gICAgICAgIGlmIChvYnNpZGlhblRlbXBsYXRlc1NldHRpbmdzLmZvbGRlcikge1xuICAgICAgICAgICAgcmV0dXJuIG9ic2lkaWFuVGVtcGxhdGVzU2V0dGluZ3MuZm9sZGVyO1xuICAgICAgICB9XG5cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmxvZyhlcnJvci5tZXNzYWdlKVxuICAgIH1cblxuICAgIHJldHVybiB1bmRlZmluZWQ7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSURhaWx5Tm90ZXNTZXR0aW5ncyB7XG4gICAgZGF0ZUZvcm1hdDogc3RyaW5nLFxuICAgIG5ld0ZpbGVMb2NhdGlvbjogc3RyaW5nLFxuICAgIHRlbXBsYXRlRmlsZUxvY2F0aW9uOiBzdHJpbmdcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIG1pZ3JhdGVEYWlseU5vdGVzU2V0dGluZ3MocGx1Z2luOiBCbGFCbGFQbHVnaW4pOiBJRGFpbHlOb3Rlc1NldHRpbmdzIHwgdW5kZWZpbmVkIHtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCBkYWlseU5vdGVzUGx1Z2luID1cbiAgICAgICAgICAgIChwbHVnaW4uYXBwIGFzIGFueSkuaW50ZXJuYWxQbHVnaW5zLmdldFBsdWdpbkJ5SWQoXCJkYWlseS1ub3Rlc1wiKTtcblxuICAgICAgICBpZiAoIWRhaWx5Tm90ZXNQbHVnaW4pIHtcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBkYWlseU5vdGVzUGx1Z2luU2V0dGluZ3MgPVxuICAgICAgICAgICAgZGFpbHlOb3Rlc1BsdWdpbi5pbnN0YW5jZS5vcHRpb25zO1xuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBkYXRlRm9ybWF0OiBkYWlseU5vdGVzUGx1Z2luU2V0dGluZ3MuZm9ybWF0Py50cmltKCkgPyBkYWlseU5vdGVzUGx1Z2luU2V0dGluZ3MuZm9ybWF0IDogREVGQVVMVF9TRVRUSU5HUy5kYXRlRm9ybWF0LFxuICAgICAgICAgICAgbmV3RmlsZUxvY2F0aW9uOiBkYWlseU5vdGVzUGx1Z2luU2V0dGluZ3MuZm9sZGVyPy50cmltKCkgPyAgZGFpbHlOb3Rlc1BsdWdpblNldHRpbmdzLmZvbGRlcj8udHJpbSgpIDogXCIvXCIsXG4gICAgICAgICAgICB0ZW1wbGF0ZUZpbGVMb2NhdGlvbjogZGFpbHlOb3Rlc1BsdWdpblNldHRpbmdzLnRlbXBsYXRlPy50cmltKCkgPz8gREVGQVVMVF9TRVRUSU5HUy50ZW1wbGF0ZUZvbGRlcixcbiAgICAgICAgfTtcblxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGVycm9yLm1lc3NhZ2UpXG4gICAgfVxuXG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbn0iLCAiaW1wb3J0IHsgVEZpbGUgfSBmcm9tIFwib2JzaWRpYW5cIlxuaW1wb3J0IEJsYUJsYVBsdWdpbiBmcm9tICcuLi9tYWluJ1xuXG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRFeHBhbmRlZFRlbXBsYXRlKHRlbXBsYXRlOiBURmlsZSwgcGx1Z2luOiBCbGFCbGFQbHVnaW4pIDogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICBjb25zdCBtb21lbnQgPSB3aW5kb3cubW9tZW50O1xuICAgIGNvbnN0IHRleHQgPSAoYXdhaXQgcGx1Z2luLmFwcC52YXVsdC5yZWFkKHRlbXBsYXRlKSlcblx0XHRcdFx0LnJlcGxhY2UoL3t7ZGF0ZX19L2dpLCBtb21lbnQoKS5mb3JtYXQocGx1Z2luLnNldHRpbmdzLmRhdGVGb3JtYXQpKVxuICAgICAgICAgICAgICAgIC5yZXBsYWNlKC97e2RhdGVcXHMqXFw6XFxzKiguKyl9fS9naSwgKG1hdGNoLCBmb3JtYXQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG1vbWVudCgpLmZvcm1hdChmb3JtYXQpO1xuICAgICAgICAgICAgICAgIH0pXG5cdFx0XHRcdC5yZXBsYWNlKC97e2RhdGVcXHMqXFwrXFxzKihcXGQrKX19L2dpLCAobWF0Y2gsIG51bWJlcikgPT4ge1xuXHRcdFx0XHRcdGNvbnN0IGRheXNUb0FkZCA9IHBhcnNlSW50KG51bWJlciwgMTApO1xuXHRcdFx0XHRcdGNvbnN0IG5ld0RhdGUgPSBtb21lbnQoKS5hZGQoZGF5c1RvQWRkLCBcImRheXNcIikuZm9ybWF0KHBsdWdpbi5zZXR0aW5ncy5kYXRlRm9ybWF0KTtcblx0XHRcdFx0XHRyZXR1cm4gbmV3RGF0ZTtcbiAgICAgICAgICAgICAgICB9KVxuXHRcdFx0XHQucmVwbGFjZSgve3tkYXRlXFxzKi1cXHMqKFxcZCspfX0vZ2ksIChtYXRjaCwgbnVtYmVyKSA9PiB7XG5cdFx0XHRcdFx0Y29uc3QgZGF5c1RvQWRkID0gcGFyc2VJbnQobnVtYmVyLCAxMCk7XG5cdFx0XHRcdFx0Y29uc3QgbmV3RGF0ZSA9IG1vbWVudCgpLmFkZCgtZGF5c1RvQWRkLCBcImRheXNcIikuZm9ybWF0KHBsdWdpbi5zZXR0aW5ncy5kYXRlRm9ybWF0KTtcblx0XHRcdFx0XHRyZXR1cm4gbmV3RGF0ZTtcbiAgICAgICAgICAgICAgICB9KVxuXHRcdFx0XHQucmVwbGFjZSgve3t0aW1lfX0vZ2ksIG1vbWVudCgpLmZvcm1hdChwbHVnaW4uc2V0dGluZ3MudGltZUZvcm1hdCkpXG5cdFx0XHRcdC5yZXBsYWNlKC97e3RpdGxlfX0vZ2ksIHRlbXBsYXRlLmJhc2VuYW1lKTtcbiAgICByZXR1cm4gdGV4dDtcbn0iLCAiaW1wb3J0IHsgU3VnZ2VzdE1vZGFsLCBURmlsZSwgQXBwLCBOb3RpY2UsIEVkaXRvcn0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQgeyBnZXRFeHBhbmRlZFRlbXBsYXRlIH0gZnJvbSBcIi4vVXRpbHNcIjtcbmltcG9ydCB7IG1pZ3JhdGVUZW1wbGF0ZXNGb2xkZXIgfSBmcm9tIFwiLi9NaWdyYXRlU2V0dGluZ3NcIjtcbmltcG9ydCBCbGFCbGFQbHVnaW4gZnJvbSBcIi4uL21haW5cIlxuXG5leHBvcnQgY2xhc3MgVGVtcGxhdGVzU3VnZ2VzdE1vZGFsIGV4dGVuZHMgU3VnZ2VzdE1vZGFsPFRGaWxlPiB7XG5cdHN1Z2dlc3Rpb25zOiBURmlsZVtdO1xuXHRjYWxsYmFjazogRnVuY3Rpb247XG5cblx0Y29uc3RydWN0b3IoYXBwOiBBcHAsIHN1Z2dlc3Rpb25zOiBURmlsZVtdLCBjYWxsYmFjazogRnVuY3Rpb24pIHtcblx0XHRzdXBlcihhcHApO1xuXHRcdHRoaXMuc3VnZ2VzdGlvbnMgPSBzdWdnZXN0aW9ucztcblx0XHR0aGlzLmNhbGxiYWNrID0gY2FsbGJhY2s7XG5cdH1cblx0Z2V0U3VnZ2VzdGlvbnMocXVlcnk6IHN0cmluZyk6IFRGaWxlW10ge1xuXHRcdHJldHVybiB0aGlzLnN1Z2dlc3Rpb25zLmZpbHRlcigoaXQpID0+XG5cdFx0XHRpdC5wYXRoLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMocXVlcnkudG9Mb3dlckNhc2UoKSlcblx0XHQpO1xuXHR9XG5cblx0cmVuZGVyU3VnZ2VzdGlvbih0ZW1wbGF0ZTogVEZpbGUsIGVsOiBIVE1MRWxlbWVudCkge1xuXHRcdGVsLmNyZWF0ZUVsKFwiZGl2XCIsIHsgdGV4dDogdGVtcGxhdGUuYmFzZW5hbWUgfSk7XG5cdFx0ZWwuY3JlYXRlRWwoXCJzbWFsbFwiLCB7IHRleHQ6IHRlbXBsYXRlLnBhdGggfSk7XG5cdH1cblxuXHRvbkNob29zZVN1Z2dlc3Rpb24odGVtcGxhdGU6IFRGaWxlLCBfZXZ0OiBNb3VzZUV2ZW50IHwgS2V5Ym9hcmRFdmVudCkge1xuXHRcdHRoaXMuY2FsbGJhY2sodGVtcGxhdGUpO1xuXHR9XG59XG5cbmZ1bmN0aW9uIGdldFRlbXBsYXRlc0ZvbGRlcihwbHVnaW46IEJsYUJsYVBsdWdpbikge1xuICAgIGlmIChwbHVnaW4uc2V0dGluZ3MubWlncmF0ZVNldHRpbmdzRnJvbUJ1aWx0aW5UZW1wbGF0ZXMpIHtcbiAgICAgICAgbGV0IGludGVybmFsVGVtcGxhdGVGb2xkZXIgPSBtaWdyYXRlVGVtcGxhdGVzRm9sZGVyKHBsdWdpbik7XG4gICAgICAgIGlmIChpbnRlcm5hbFRlbXBsYXRlRm9sZGVyID09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgbmV3IE5vdGljZShcIkJ1aWx0aW4gcGx1Z2luIGBUZW1wbGF0ZXNgIGlzIG5vdCBhdmFpbGFibGVcIilcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGludGVybmFsVGVtcGxhdGVGb2xkZXI7XG4gICAgfVxuXG4gICAgZWxzZSB7XG4gICAgICAgIGxldCBsb2NhbFRlbXBsYXRlRm9sZGVyID0gcGx1Z2luLnNldHRpbmdzLnRlbXBsYXRlRm9sZGVyO1xuICAgICAgICBpZiAobG9jYWxUZW1wbGF0ZUZvbGRlciA9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJUZW1wbGF0ZXMgZm9sZGVyIGlzIG5vdCBzcGVjaWZpZWRcIilcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGxvY2FsVGVtcGxhdGVGb2xkZXI7XG4gICAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZXhwYW5kVGVtcGxhdGUocGx1Z2luOiBCbGFCbGFQbHVnaW4sIGVkaXRvcjogRWRpdG9yKSB7XG4gICAgY29uc3QgdGVtcGxhdGVGb2xkZXJQYXRoID0gZ2V0VGVtcGxhdGVzRm9sZGVyKHBsdWdpbik7XG4gICAgaWYgKCF0ZW1wbGF0ZUZvbGRlclBhdGgpXG4gICAgICAgIHJldHVybjtcblxuICAgIGNvbnN0IHRlbXBsYXRlTmFtZSA9IGVkaXRvci5nZXRTZWxlY3Rpb24oKS50cmltKCk7XG5cbiAgICBjb25zdCBmaWxlcyA9IHBsdWdpbi5hcHAudmF1bHQuZ2V0TWFya2Rvd25GaWxlcygpLmZpbHRlcigoZmlsZSkgPT5cbiAgICAgICAgZmlsZS5wYXRoLnN0YXJ0c1dpdGgodGVtcGxhdGVGb2xkZXJQYXRoKVxuICAgIClcblxuICAgIGNvbnN0IGluc2VydFRlbXBsYXRlID0gYXN5bmMgKHRlbXBsYXRlOiBURmlsZSkgPT4ge1xuICAgICAgICBjb25zdCB0ZW1wbGF0ZVRleHQgPSBhd2FpdCBnZXRFeHBhbmRlZFRlbXBsYXRlKHRlbXBsYXRlLCBwbHVnaW4pO1xuICAgICAgICBlZGl0b3IucmVwbGFjZVNlbGVjdGlvbih0ZW1wbGF0ZVRleHQpO1xuICAgIH1cblxuICAgIGlmICh0ZW1wbGF0ZU5hbWUgPT0gXCJcIikge1xuICAgICAgICBjb25zdCBtb2RhbCA9IG5ldyBUZW1wbGF0ZXNTdWdnZXN0TW9kYWwocGx1Z2luLmFwcCwgZmlsZXMsIGluc2VydFRlbXBsYXRlKTtcbiAgICAgICAgbW9kYWwub3BlbigpO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgbGV0IHRlbXBsYXRlc0NvbGxlY3Rpb24gPSBmaWxlcy5maWx0ZXIoaXQgPT4gaXQuYmFzZW5hbWUgPT09IHRlbXBsYXRlTmFtZSk7XG5cbiAgICBpZiAoIXRlbXBsYXRlc0NvbGxlY3Rpb24ubGVuZ3RoKSB7XG4gICAgICAgIG5ldyBOb3RpY2UoYFRlbXBsYXRlICR7dGVtcGxhdGVOYW1lfSB3YXMgbm90IGZvdW5kYClcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICh0ZW1wbGF0ZXNDb2xsZWN0aW9uLmxlbmd0aCA9PSAxKSB7XG4gICAgICAgIGxldCB0ZW1wbGF0ZSA9IHRlbXBsYXRlc0NvbGxlY3Rpb24uZmlyc3QoKTtcbiAgICAgICAgaWYgKCF0ZW1wbGF0ZSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgaW5zZXJ0VGVtcGxhdGUodGVtcGxhdGUpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgY29uc3QgbW9kYWwgPSBuZXcgVGVtcGxhdGVzU3VnZ2VzdE1vZGFsKHBsdWdpbi5hcHAsIHRlbXBsYXRlc0NvbGxlY3Rpb24sIGluc2VydFRlbXBsYXRlKTtcbiAgICAgICAgbW9kYWwub3BlbigpO1xuICAgIH1cbn1cbiIsICJpbXBvcnQgQmxhQmxhUGx1Z2luIGZyb20gXCJtYWluXCI7XG5pbXBvcnQgeyBFZGl0b3IgfSBmcm9tIFwib2JzaWRpYW5cIjtcblxuZXhwb3J0IGZ1bmN0aW9uIGNvcHlTdHJ1Y3R1cmFsRm9ybWF0dGluZyhlZGl0b3I6IEVkaXRvcikge1xuICAgIGxldCB0ZXh0VG9Db3B5ID0gZWRpdG9yLmdldFNlbGVjdGlvbigpO1xuICAgIGlmICh0ZXh0VG9Db3B5ID09IFwiXCIpIHtcbiAgICAgICAgdGV4dFRvQ29weSA9IGVkaXRvci5nZXRWYWx1ZSgpO1xuICAgIH1cblxuICAgIHRleHRUb0NvcHkgPSB0ZXh0VG9Db3B5LnJlcGxhY2UoLzwoLnxcXG4pKj8+L2csICcnKTtcbiAgICB2YXIgYmxvYiA9IG5ldyBCbG9iKFt0ZXh0VG9Db3B5XSwgeyB0eXBlOiAndGV4dC9wbGFpbicgfSk7XG4gICAgY29uc3QgZGF0YSA9IFtuZXcgQ2xpcGJvYXJkSXRlbSh7XG4gICAgICAgIFtcInRleHQvcGxhaW5cIl06IGJsb2IsXG4gICAgfSldO1xuICAgIG5hdmlnYXRvci5jbGlwYm9hcmQud3JpdGUoZGF0YSk7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjb3B5UGxhaW5NYXJrZG93bihwbHVnaW46IEJsYUJsYVBsdWdpbiwgZWRpdG9yOiBFZGl0b3IpIHtcbiAgICBsZXQgdGV4dCA9IGVkaXRvci5nZXRTZWxlY3Rpb24oKTtcbiAgICBpZiAodGV4dCA9PSBcIlwiKSB7XG4gICAgICAgIHRleHQgPSBlZGl0b3IuZ2V0VmFsdWUoKTtcbiAgICB9XG5cbiAgICB0ZXh0ID0gdGV4dC5yZXBsYWNlKC8tLS0uKj8tLS0vZywgJycpOyAvLyBSZW1vdmVzIGFsaWFzZXNcbiAgICB0ZXh0ID0gdGV4dC5yZXBsYWNlKC88KC58XFxuKSo/Pi9nLCAnJyk7IC8vIFJlbW92ZXMgdGFnIGZvcm1hdHRpbmdcbiAgICB0ZXh0ID0gdGV4dC5yZXBsYWNlKC9cXFtcXF5cXHcrXFxdL2csICcnKTtcblxuICAgIGlmIChwbHVnaW4uc2V0dGluZ3MucmVtb3ZlQnJhY2tldHMpIHtcbiAgICAgICAgdGV4dCA9IHRleHQucmVwbGFjZSgvXFxbXFxbKC4qPylcXF1cXF0vZywgJyQxJyk7XG4gICAgfVxuXG4gICAgaWYgKHBsdWdpbi5zZXR0aW5ncy5yZW1vdmVFbXBoYXNpcykge1xuICAgICAgICB0ZXh0ID0gdGV4dC5yZXBsYWNlKC89PS9nLCAnJyk7IC8vIFJlbW92ZXMgaGlnaGxpZ2h0c1xuICAgIH1cblxuICAgIGlmIChwbHVnaW4uc2V0dGluZ3MucmVtb3ZlVGFncykge1xuICAgICAgICB0ZXh0ID0gdGV4dC5yZXBsYWNlKC8jXFx3Ky9nLCAnJyk7XG4gICAgfVxuXG4gICAgaWYgKHBsdWdpbi5zZXR0aW5ncy5yZW1vdmVDb21tZW50cykge1xuICAgICAgICB0ZXh0ID0gdGV4dC5yZXBsYWNlKC8lJS4rJSUvZywgJycpO1xuICAgIH1cblxuICAgIHZhciBibG9iID0gbmV3IEJsb2IoW3RleHRdLCB7IHR5cGU6ICd0ZXh0L3BsYWluJyB9KTtcbiAgICBjb25zdCBkYXRhID0gW25ldyBDbGlwYm9hcmRJdGVtKHtcbiAgICAgICAgW1widGV4dC9wbGFpblwiXTogYmxvYixcbiAgICB9KV07XG4gICAgbmF2aWdhdG9yLmNsaXBib2FyZC53cml0ZShkYXRhKTtcbn0iXSwKICAibWFwcGluZ3MiOiAi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Q3pCLHFCQUFlLFdBQVcscUJBQXFCLGtCQUFrQjtBQUFBLElBQ2xFLENBQUMsQ0FBQztBQUVGLFVBQU0sbUJBQW1CLEtBQUssV0FBVztBQUFBLE1BQ3hDLElBQUk7QUFBQSxNQUNKLE1BQU07QUFBQSxNQUNOLGdCQUFnQixDQUFDLFdBQW1CO0FBQ25DLGNBQU0sV0FBVyxLQUFLLElBQUksVUFBVSxjQUFjO0FBQ2xELFlBQUksQ0FBQztBQUFVO0FBQ2YsWUFBSSxPQUFPLE9BQU8sU0FBUztBQUMzQixZQUFJLFFBQVE7QUFDWixlQUFPLEtBQUssUUFBUSxnQkFBZ0IsQ0FBQyxRQUFRLFNBQVM7QUFDckQsa0JBQVE7QUFDUixpQkFBTztBQUFBLFFBQ1IsQ0FBQztBQUNELGVBQU8sS0FBSyxRQUFRLGdCQUFnQixDQUFDLFFBQVEsU0FBUztBQUNyRCxrQkFBUTtBQUNSLGlCQUFPO0FBQUEsUUFDUixDQUFDO0FBRUQsWUFBSSxDQUFDO0FBQ0o7QUFFRCxlQUFPLFNBQVMsSUFBSTtBQUFBLE1BQ3JCO0FBQUEsSUFDRCxDQUFDO0FBR0QsU0FBSyxjQUFjLElBQUksaUJBQWlCLElBQUksQ0FBQztBQUFBLEVBQzlDO0FBQUEsRUFFQSxXQUFXO0FBQUEsRUFFWDtBQUFBLEVBRUEsTUFBTSxlQUFlO0FBQ3BCLFNBQUssV0FBVyxPQUFPLE9BQU8sQ0FBQyxHQUFHLGtCQUFrQixNQUFNLEtBQUssU0FBUyxDQUFDO0FBQUEsRUFDMUU7QUFBQSxFQUVBLE1BQU0sZUFBZTtBQUNwQixVQUFNLEtBQUssU0FBUyxLQUFLLFFBQVE7QUFBQSxFQUNsQztBQUNEOyIsCiAgIm5hbWVzIjogWyJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiJdCn0K
